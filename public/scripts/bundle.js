/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={465:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object Boolean]",a="[object Date]",c="[object Function]",l="[object GeneratorFunction]",u="[object Map]",h="[object Number]",d="[object Object]",p="[object Promise]",f="[object RegExp]",_="[object Set]",g="[object String]",m="[object Symbol]",v="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",b="[object Float32Array]",C="[object Float64Array]",I="[object Int8Array]",T="[object Int16Array]",k="[object Int32Array]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",P="[object Uint16Array]",N="[object Uint32Array]",R=/\w*$/,x=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,A={};A[s]=A["[object Array]"]=A[y]=A[w]=A[o]=A[a]=A[b]=A[C]=A[I]=A[T]=A[k]=A[u]=A[h]=A[d]=A[f]=A[_]=A[g]=A[m]=A[E]=A[S]=A[P]=A[N]=!0,A["[object Error]"]=A[c]=A[v]=!1;var D="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,M="object"==typeof self&&self&&self.Object===Object&&self,L=D||M||Function("return this")(),$=t&&!t.nodeType&&t,F=$&&e&&!e.nodeType&&e,j=F&&F.exports===$;function U(e,t){return e.set(t[0],t[1]),e}function q(e,t){return e.add(t),e}function W(e,t,n,i){var r=-1,s=e?e.length:0;for(i&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n}function z(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function H(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function V(e,t){return function(n){return e(t(n))}}function B(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var G,K=Array.prototype,Y=Function.prototype,J=Object.prototype,Q=L["__core-js_shared__"],X=(G=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",Z=Y.toString,ee=J.hasOwnProperty,te=J.toString,ne=RegExp("^"+Z.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ie=j?L.Buffer:void 0,re=L.Symbol,se=L.Uint8Array,oe=V(Object.getPrototypeOf,Object),ae=Object.create,ce=J.propertyIsEnumerable,le=K.splice,ue=Object.getOwnPropertySymbols,he=ie?ie.isBuffer:void 0,de=V(Object.keys,Object),pe=Le(L,"DataView"),fe=Le(L,"Map"),_e=Le(L,"Promise"),ge=Le(L,"Set"),me=Le(L,"WeakMap"),ve=Le(Object,"create"),ye=qe(pe),we=qe(fe),be=qe(_e),Ce=qe(ge),Ie=qe(me),Te=re?re.prototype:void 0,ke=Te?Te.valueOf:void 0;function Ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Pe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ne(e){this.__data__=new Se(e)}function Re(e,t,n){var i=e[t];ee.call(e,t)&&We(i,n)&&(void 0!==n||t in e)||(e[t]=n)}function xe(e,t){for(var n=e.length;n--;)if(We(e[n][0],t))return n;return-1}function Oe(e,t,n,i,r,p,v){var x;if(i&&(x=p?i(e,r,p,v):i(e)),void 0!==x)return x;if(!Ge(e))return e;var O=ze(e);if(O){if(x=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&ee.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!t)return function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(e,x)}else{var D=Fe(e),M=D==c||D==l;if(Ve(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(D==d||D==s||M&&!p){if(z(e))return p?e:{};if(x=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:Ge(t=oe(e))?ae(t):{};var t}(M?{}:e),!t)return function(e,t){return De(e,$e(e),t)}(e,function(e,t){return e&&De(t,Ke(t),e)}(x,e))}else{if(!A[D])return p?e:{};x=function(e,t,n,i){var r,s=e.constructor;switch(t){case y:return Ae(e);case o:case a:return new s(+e);case w:return function(e,t){var n=t?Ae(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,i);case b:case C:case I:case T:case k:case E:case S:case P:case N:return function(e,t){var n=t?Ae(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,i);case u:return function(e,t,n){return W(t?n(H(e),!0):H(e),U,new e.constructor)}(e,i,n);case h:case g:return new s(e);case f:return function(e){var t=new e.constructor(e.source,R.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return function(e,t,n){return W(t?n(B(e),!0):B(e),q,new e.constructor)}(e,i,n);case m:return r=e,ke?Object(ke.call(r)):{}}}(e,D,Oe,t)}}v||(v=new Ne);var L=v.get(e);if(L)return L;if(v.set(e,x),!O)var $=n?function(e){return function(e,t,n){var i=t(e);return ze(e)?i:function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}(i,n(e))}(e,Ke,$e)}(e):Ke(e);return function(e,t){for(var n=-1,i=e?e.length:0;++n<i&&!1!==t(e[n],n););}($||e,(function(r,s){$&&(r=e[s=r]),Re(x,s,Oe(r,t,n,i,s,e,v))})),x}function Ae(e){var t=new e.constructor(e.byteLength);return new se(t).set(new se(e)),t}function De(e,t,n,i){n||(n={});for(var r=-1,s=t.length;++r<s;){var o=t[r],a=i?i(n[o],e[o],o,n,e):void 0;Re(n,o,void 0===a?e[o]:a)}return n}function Me(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ge(e)||(t=e,X&&X in t))&&(Be(e)||z(e)?ne:x).test(qe(e));var t}(n)?n:void 0}Ee.prototype.clear=function(){this.__data__=ve?ve(null):{}},Ee.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ee.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return n===i?void 0:n}return ee.call(t,e)?t[e]:void 0},Ee.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:ee.call(t,e)},Ee.prototype.set=function(e,t){return this.__data__[e]=ve&&void 0===t?i:t,this},Se.prototype.clear=function(){this.__data__=[]},Se.prototype.delete=function(e){var t=this.__data__,n=xe(t,e);return!(n<0||(n==t.length-1?t.pop():le.call(t,n,1),0))},Se.prototype.get=function(e){var t=this.__data__,n=xe(t,e);return n<0?void 0:t[n][1]},Se.prototype.has=function(e){return xe(this.__data__,e)>-1},Se.prototype.set=function(e,t){var n=this.__data__,i=xe(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},Pe.prototype.clear=function(){this.__data__={hash:new Ee,map:new(fe||Se),string:new Ee}},Pe.prototype.delete=function(e){return Me(this,e).delete(e)},Pe.prototype.get=function(e){return Me(this,e).get(e)},Pe.prototype.has=function(e){return Me(this,e).has(e)},Pe.prototype.set=function(e,t){return Me(this,e).set(e,t),this},Ne.prototype.clear=function(){this.__data__=new Se},Ne.prototype.delete=function(e){return this.__data__.delete(e)},Ne.prototype.get=function(e){return this.__data__.get(e)},Ne.prototype.has=function(e){return this.__data__.has(e)},Ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Se){var i=n.__data__;if(!fe||i.length<199)return i.push([e,t]),this;n=this.__data__=new Pe(i)}return n.set(e,t),this};var $e=ue?V(ue,Object):function(){return[]},Fe=function(e){return te.call(e)};function je(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&e<t}function Ue(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||J)}function qe(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function We(e,t){return e===t||e!=e&&t!=t}(pe&&Fe(new pe(new ArrayBuffer(1)))!=w||fe&&Fe(new fe)!=u||_e&&Fe(_e.resolve())!=p||ge&&Fe(new ge)!=_||me&&Fe(new me)!=v)&&(Fe=function(e){var t=te.call(e),n=t==d?e.constructor:void 0,i=n?qe(n):void 0;if(i)switch(i){case ye:return w;case we:return u;case be:return p;case Ce:return _;case Ie:return v}return t});var ze=Array.isArray;function He(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!Be(e)}var Ve=he||function(){return!1};function Be(e){var t=Ge(e)?te.call(e):"";return t==c||t==l}function Ge(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ke(e){return He(e)?function(e,t){var n=ze(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&He(e)}(e)&&ee.call(e,"callee")&&(!ce.call(e,"callee")||te.call(e)==s)}(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],i=n.length,r=!!i;for(var o in e)!t&&!ee.call(e,o)||r&&("length"==o||je(o,i))||n.push(o);return n}(e):function(e){if(!Ue(e))return de(e);var t=[];for(var n in Object(e))ee.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}e.exports=function(e){return Oe(e,!0,!0)}},208:(e,t,n)=>{var i,r="__lodash_hash_undefined__",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,u=/^\[object .+?Constructor\]$/,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,p=h||d||Function("return this")(),f=Array.prototype,_=Function.prototype,g=Object.prototype,m=p["__core-js_shared__"],v=(i=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",y=_.toString,w=g.hasOwnProperty,b=g.toString,C=RegExp("^"+y.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=p.Symbol,T=f.splice,k=D(p,"Map"),E=D(Object,"create"),S=I?I.prototype:void 0,P=S?S.toString:void 0;function N(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function R(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function O(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function A(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function D(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!j(e)||v&&v in e)return!1;var t=function(e){var t=j(e)?b.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:u;return t.test(function(e){if(null!=e){try{return y.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}N.prototype.clear=function(){this.__data__=E?E(null):{}},N.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},N.prototype.get=function(e){var t=this.__data__;if(E){var n=t[e];return n===r?void 0:n}return w.call(t,e)?t[e]:void 0},N.prototype.has=function(e){var t=this.__data__;return E?void 0!==t[e]:w.call(t,e)},N.prototype.set=function(e,t){return this.__data__[e]=E&&void 0===t?r:t,this},R.prototype.clear=function(){this.__data__=[]},R.prototype.delete=function(e){var t=this.__data__,n=O(t,e);return!(n<0||(n==t.length-1?t.pop():T.call(t,n,1),0))},R.prototype.get=function(e){var t=this.__data__,n=O(t,e);return n<0?void 0:t[n][1]},R.prototype.has=function(e){return O(this.__data__,e)>-1},R.prototype.set=function(e,t){var n=this.__data__,i=O(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},x.prototype.clear=function(){this.__data__={hash:new N,map:new(k||R),string:new N}},x.prototype.delete=function(e){return A(this,e).delete(e)},x.prototype.get=function(e){return A(this,e).get(e)},x.prototype.has=function(e){return A(this,e).has(e)},x.prototype.set=function(e,t){return A(this,e).set(e,t),this};var M=$((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(U(e))return P?P.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return a.test(e)&&n.push(""),e.replace(c,(function(e,t,i,r){n.push(i?r.replace(l,"$1"):t||e)})),n}));function L(e){if("string"==typeof e||U(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o),o};return n.cache=new($.Cache||x),n}$.Cache=x;var F=Array.isArray;function j(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function U(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==b.call(e)}e.exports=function(e,t,n){var i=null==e?void 0:function(e,t){var n;t=function(e,t){if(F(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!U(e))||o.test(e)||!s.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:F(n=t)?n:M(n);for(var i=0,r=t.length;null!=e&&i<r;)e=e[L(t[i++])];return i&&i==r?e:void 0}(e,t);return void 0===i?n:i}},307:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",l="[object Error]",u="[object Function]",h="[object Map]",d="[object Number]",p="[object Object]",f="[object Promise]",_="[object RegExp]",g="[object Set]",m="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",b=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[s]=I[o]=I[y]=I[a]=I[w]=I[c]=I[l]=I[u]=I[h]=I[d]=I[p]=I[_]=I[g]=I[m]=I[v]=!1;var T="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,k="object"==typeof self&&self&&self.Object===Object&&self,E=T||k||Function("return this")(),S=t&&!t.nodeType&&t,P=S&&e&&!e.nodeType&&e,N=P&&P.exports===S,R=N&&T.process,x=function(){try{return R&&R.binding&&R.binding("util")}catch(e){}}(),O=x&&x.isTypedArray;function A(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function D(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function M(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var L,$,F,j=Array.prototype,U=Function.prototype,q=Object.prototype,W=E["__core-js_shared__"],z=U.toString,H=q.hasOwnProperty,V=(L=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",B=q.toString,G=RegExp("^"+z.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=N?E.Buffer:void 0,Y=E.Symbol,J=E.Uint8Array,Q=q.propertyIsEnumerable,X=j.splice,Z=Y?Y.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=K?K.isBuffer:void 0,ne=($=Object.keys,F=Object,function(e){return $(F(e))}),ie=Pe(E,"DataView"),re=Pe(E,"Map"),se=Pe(E,"Promise"),oe=Pe(E,"Set"),ae=Pe(E,"WeakMap"),ce=Pe(Object,"create"),le=Oe(ie),ue=Oe(re),he=Oe(se),de=Oe(oe),pe=Oe(ae),fe=Y?Y.prototype:void 0,_e=fe?fe.valueOf:void 0;function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ve;++t<n;)this.add(e[t])}function we(e){var t=this.__data__=new me(e);this.size=t.size}function be(e,t){for(var n=e.length;n--;)if(Ae(e[n][0],t))return n;return-1}function Ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?function(e){var t=H.call(e,Z),n=e[Z];try{e[Z]=void 0;var i=!0}catch(e){}var r=B.call(e);return i&&(t?e[Z]=n:delete e[Z]),r}(e):function(e){return B.call(e)}(e)}function Ie(e){return Ue(e)&&Ce(e)==s}function Te(e,t,n,i,r){return e===t||(null==e||null==t||!Ue(e)&&!Ue(t)?e!=e&&t!=t:function(e,t,n,i,r,u){var f=Me(e),v=Me(t),b=f?o:Re(e),C=v?o:Re(t),I=(b=b==s?p:b)==p,T=(C=C==s?p:C)==p,k=b==C;if(k&&Le(e)){if(!Le(t))return!1;f=!0,I=!1}if(k&&!I)return u||(u=new we),f||qe(e)?ke(e,t,n,i,r,u):function(e,t,n,i,r,s,o){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case y:return!(e.byteLength!=t.byteLength||!s(new J(e),new J(t)));case a:case c:case d:return Ae(+e,+t);case l:return e.name==t.name&&e.message==t.message;case _:case m:return e==t+"";case h:var u=D;case g:var p=1&i;if(u||(u=M),e.size!=t.size&&!p)return!1;var f=o.get(e);if(f)return f==t;i|=2,o.set(e,t);var v=ke(u(e),u(t),i,r,s,o);return o.delete(e),v;case"[object Symbol]":if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,b,n,i,r,u);if(!(1&n)){var E=I&&H.call(e,"__wrapped__"),S=T&&H.call(t,"__wrapped__");if(E||S){var P=E?e.value():e,N=S?t.value():t;return u||(u=new we),r(P,N,n,i,u)}}return!!k&&(u||(u=new we),function(e,t,n,i,r,s){var o=1&n,a=Ee(e),c=a.length;if(c!=Ee(t).length&&!o)return!1;for(var l=c;l--;){var u=a[l];if(!(o?u in t:H.call(t,u)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var d=!0;s.set(e,t),s.set(t,e);for(var p=o;++l<c;){var f=e[u=a[l]],_=t[u];if(i)var g=o?i(_,f,u,t,e,s):i(f,_,u,e,t,s);if(!(void 0===g?f===_||r(f,_,n,i,s):g)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var m=e.constructor,v=t.constructor;m==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v||(d=!1)}return s.delete(e),s.delete(t),d}(e,t,n,i,r,u))}(e,t,n,i,Te,r))}function ke(e,t,n,i,r,s){var o=1&n,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var u=-1,h=!0,d=2&n?new ye:void 0;for(s.set(e,t),s.set(t,e);++u<a;){var p=e[u],f=t[u];if(i)var _=o?i(f,p,u,t,e,s):i(p,f,u,e,t,s);if(void 0!==_){if(_)continue;h=!1;break}if(d){if(!A(t,(function(e,t){if(o=t,!d.has(o)&&(p===e||r(p,e,n,i,s)))return d.push(t);var o}))){h=!1;break}}else if(p!==f&&!r(p,f,n,i,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Ee(e){return function(e,t,n){var i=t(e);return Me(e)?i:function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}(i,n(e))}(e,We,Ne)}function Se(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Pe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!je(e)||function(e){return!!V&&V in e}(e))&&($e(e)?G:b).test(Oe(e))}(n)?n:void 0}ge.prototype.clear=function(){this.__data__=ce?ce(null):{},this.size=0},ge.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ge.prototype.get=function(e){var t=this.__data__;if(ce){var n=t[e];return n===i?void 0:n}return H.call(t,e)?t[e]:void 0},ge.prototype.has=function(e){var t=this.__data__;return ce?void 0!==t[e]:H.call(t,e)},ge.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ce&&void 0===t?i:t,this},me.prototype.clear=function(){this.__data__=[],this.size=0},me.prototype.delete=function(e){var t=this.__data__,n=be(t,e);return!(n<0||(n==t.length-1?t.pop():X.call(t,n,1),--this.size,0))},me.prototype.get=function(e){var t=this.__data__,n=be(t,e);return n<0?void 0:t[n][1]},me.prototype.has=function(e){return be(this.__data__,e)>-1},me.prototype.set=function(e,t){var n=this.__data__,i=be(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},ve.prototype.clear=function(){this.size=0,this.__data__={hash:new ge,map:new(re||me),string:new ge}},ve.prototype.delete=function(e){var t=Se(this,e).delete(e);return this.size-=t?1:0,t},ve.prototype.get=function(e){return Se(this,e).get(e)},ve.prototype.has=function(e){return Se(this,e).has(e)},ve.prototype.set=function(e,t){var n=Se(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},ye.prototype.add=ye.prototype.push=function(e){return this.__data__.set(e,i),this},ye.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new me,this.size=0},we.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var n=this.__data__;if(n instanceof me){var i=n.__data__;if(!re||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new ve(i)}return n.set(e,t),this.size=n.size,this};var Ne=ee?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var i=-1,r=null==t?0:t.length,s=0,o=[];++i<r;){var a=t[i];c=a,Q.call(e,c)&&(o[s++]=a)}var c;return o}(ee(e)))}:function(){return[]},Re=Ce;function xe(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||C.test(e))&&e>-1&&e%1==0&&e<t}function Oe(e){if(null!=e){try{return z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ae(e,t){return e===t||e!=e&&t!=t}(ie&&Re(new ie(new ArrayBuffer(1)))!=w||re&&Re(new re)!=h||se&&Re(se.resolve())!=f||oe&&Re(new oe)!=g||ae&&Re(new ae)!=v)&&(Re=function(e){var t=Ce(e),n=t==p?e.constructor:void 0,i=n?Oe(n):"";if(i)switch(i){case le:return w;case ue:return h;case he:return f;case de:return g;case pe:return v}return t});var De=Ie(function(){return arguments}())?Ie:function(e){return Ue(e)&&H.call(e,"callee")&&!Q.call(e,"callee")},Me=Array.isArray,Le=te||function(){return!1};function $e(e){if(!je(e))return!1;var t=Ce(e);return t==u||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Fe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function je(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ue(e){return null!=e&&"object"==typeof e}var qe=O?function(e){return function(t){return e(t)}}(O):function(e){return Ue(e)&&Fe(e.length)&&!!I[Ce(e)]};function We(e){return null!=(t=e)&&Fe(t.length)&&!$e(t)?function(e,t){var n=Me(e),i=!n&&De(e),r=!n&&!i&&Le(e),s=!n&&!i&&!r&&qe(e),o=n||i||r||s,a=o?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],c=a.length;for(var l in e)!t&&!H.call(e,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||xe(l,c))||a.push(l);return a}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||q))return ne(e);var t,n,i=[];for(var r in Object(e))H.call(e,r)&&"constructor"!=r&&i.push(r);return i}(e);var t}e.exports=function(e,t){return Te(e,t)}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i](s,s.exports,n),s.loaded=!0,s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";function e(){}const t=e=>e;function i(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(i)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c;function l(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function u(e){return 0===Object.keys(e).length}function h(t,n,i){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}(n,i))}function d(e,t,n,i){if(e){const r=p(e,t,n,i);return e[0](r)}}function p(e,t,n,i){return e[1]&&i?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function f(e,t,n,i){if(e[2]&&i){const r=e[2](i(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|r[i];return e}return t.dirty|r}return t.dirty}function _(e,t,n,i,r,s){if(r){const o=p(t,n,i,s);e.p(o,r)}}function g(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function m(t){return t&&o(t.destroy)?t.destroy:e}const v="undefined"!=typeof window;let y=v?()=>window.performance.now():()=>Date.now(),w=v?e=>requestAnimationFrame(e):e;const b=new Set;function C(e){b.forEach((t=>{t.c(e)||(b.delete(t),t.f())})),0!==b.size&&w(C)}let I=!1;function T(e,t){e.appendChild(t)}function k(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function E(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode.removeChild(e)}function P(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function N(e){return document.createElement(e)}function R(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function x(e){return document.createTextNode(e)}function O(){return x(" ")}function A(){return x("")}function D(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function L(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}function F(e,t,n){e.classList[n?"add":"remove"](t)}function j(e,t,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}const U=new Set;let q,W=0;function z(e,t,n,i,r,s,o,a=0){const c=16.666/i;let l="{\n";for(let e=0;e<=1;e+=c){const i=t+(n-t)*s(e);l+=100*e+`%{${o(i,1-i)}}\n`}const u=l+`100% {${o(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,d=k(e);U.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=function(e){const t=N("style");return function(e,t){T(e.head||e,t)}(k(e),t),t}(e).sheet),f=d.__svelte_rules||(d.__svelte_rules={});f[h]||(f[h]=!0,p.insertRule(`@keyframes ${h} ${u}`,p.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${h} ${i}ms linear ${r}ms 1 both`,W+=1,h}function H(e){q=e}function V(){if(!q)throw new Error("Function called outside component initialization");return q}function B(e){V().$$.on_mount.push(e)}function G(){const e=V();return(t,n)=>{const i=e.$$.callbacks[t];if(i){const r=j(t,n);i.slice().forEach((t=>{t.call(e,r)}))}}}function K(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const Y=[],J=[],Q=[],X=[],Z=Promise.resolve();let ee=!1;function te(){ee||(ee=!0,Z.then(ae))}function ne(){return te(),Z}function ie(e){Q.push(e)}const re=new Set;let se,oe=0;function ae(){const e=q;do{for(;oe<Y.length;){const e=Y[oe];oe++,H(e),ce(e.$$)}for(H(null),Y.length=0,oe=0;J.length;)J.pop()();for(let e=0;e<Q.length;e+=1){const t=Q[e];re.has(t)||(re.add(t),t())}Q.length=0}while(Y.length);for(;X.length;)X.pop()();ee=!1,re.clear(),H(e)}function ce(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}function le(e,t,n){e.dispatchEvent(j(`${t?"intro":"outro"}${n}`))}const ue=new Set;let he;function de(){he={r:0,c:[],p:he}}function pe(){he.r||s(he.c),he=he.p}function fe(e,t){e&&e.i&&(ue.delete(e),e.i(t))}function _e(e,t,n,i){if(e&&e.o){if(ue.has(e))return;ue.add(e),he.c.push((()=>{ue.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}const ge={duration:0};function me(n,i,r,a){let c=i(n,r),l=a?0:1,u=null,h=null,d=null;function p(){d&&function(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-i.length;r&&(e.style.animation=i.join(", "),W-=r,W||w((()=>{W||(U.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),U.clear())})))}(n,d)}function f(e,t){const n=e.b-l;return t*=Math.abs(n),{a:l,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function _(i){const{delay:r=0,duration:o=300,easing:a=t,tick:_=e,css:g}=c||ge,m={start:y()+r,b:i};i||(m.group=he,he.r+=1),u||h?h=m:(g&&(p(),d=z(n,l,i,o,r,a,g)),i&&_(0,1),u=f(m,o),ie((()=>le(n,i,"start"))),function(e){let t;0===b.size&&w(C),new Promise((n=>{b.add(t={c:e,f:n})}))}((e=>{if(h&&e>h.start&&(u=f(h,o),h=null,le(n,u.b,"start"),g&&(p(),d=z(n,l,u.b,u.duration,0,a,c.css))),u)if(e>=u.end)_(l=u.b,1-l),le(n,u.b,"end"),h||(u.b?p():--u.group.r||s(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;l=u.a+u.d*a(t/u.duration),_(l,1-l)}return!(!u&&!h)})))}return{run(e){o(c)?(se||(se=Promise.resolve(),se.then((()=>{se=null}))),se).then((()=>{c=c(),_(e)})):_(e)},end(){p(),u=h=null}}}function ve(e,t){_e(e,1,1,(()=>{t.delete(e.key)}))}let ye;function we(e){e&&e.c()}function be(e,t,n,r){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=e.$$;a&&a.m(t,n),r||ie((()=>{const t=c.map(i).filter(o);l?l.push(...t):s(t),e.$$.on_mount=[]})),u.forEach(ie)}function Ce(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ie(t,n,i,o,a,c,l,u=[-1]){const h=q;H(t);const d=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};l&&l(d.root);let p=!1;if(d.ctx=i?i(t,n.props||{},((e,n,...i)=>{const r=i.length?i[0]:n;return d.ctx&&a(d.ctx[e],d.ctx[e]=r)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](r),p&&function(e,t){-1===e.$$.dirty[0]&&(Y.push(e),te(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],d.update(),p=!0,s(d.before_update),d.fragment=!!o&&o(d.ctx),n.target){if(n.hydrate){I=!0;const e=(f=n.target,Array.from(f.childNodes));d.fragment&&d.fragment.l(e),e.forEach(S)}else d.fragment&&d.fragment.c();n.intro&&fe(t.$$.fragment),be(t,n.target,n.anchor,n.customElement),I=!1,ae()}var f;H(h)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(ye=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(i).filter(o);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){Ce(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class Te{$destroy(){Ce(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ke(e,{delay:n=0,duration:i=400,easing:r=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:i,easing:r,css:e=>"opacity: "+e*s}}const Ee=[];function Se(e,t){return{subscribe:Pe(e,t).subscribe}}function Pe(t,n=e){let i;const r=new Set;function s(e){if(a(t,e)&&(t=e,i)){const e=!Ee.length;for(const e of r)e[1](),Ee.push(e,t);if(e){for(let e=0;e<Ee.length;e+=2)Ee[e][0](Ee[e+1]);Ee.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(o,a=e){const c=[o,a];return r.add(c),1===r.size&&(i=n(s)||e),o(t),()=>{r.delete(c),0===r.size&&(i(),i=null)}}}}const Ne=function(e,t){if(!e)throw Re(t)},Re=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},xe=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw Error();const c=r<<2|s>>4;if(i.push(c),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ae=function(e){try{return Oe.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function De(e){return Me(void 0,e)}function Me(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Me(e[n],t[n]));return e}class Le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function $e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function je(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class Ue extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qe.prototype.create)}}class qe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(We,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Ue(i,o,n)}}const We=/\{\$([^}]+)}/g;function ze(e){return JSON.parse(e)}function He(e){return JSON.stringify(e)}const Ve=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=ze(Ae(s[0])||""),n=ze(Ae(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:r}};function Be(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ge(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Ke(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ye(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function Je(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(Qe(n)&&Qe(s)){if(!Je(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function Qe(e){return null!==e&&"object"==typeof e}function Xe(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ze(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function et(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class tt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(i=c^o&(a^c),r=1518500249):(i=o^a^c,r=1859775393):e<60?(i=o&a|c&(o|a),r=2400959708):(i=o^a^c,r=3395469782);const t=(s<<5|s>>>27)+i+l+r+n[e]&4294967295;l=c,c=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let i=24;i>=0;i-=8)e[n]=this.chain_[t]>>i&255,++n;return e}}class nt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=it),void 0===i.error&&(i.error=it),void 0===i.complete&&(i.complete=it);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function it(){}function rt(e,t){return`${e} failed: ${t} argument `}const st=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function ot(e){return e&&e._delegate?e._delegate:e}class at{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ct="[DEFAULT]";class lt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Le;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ct})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===ct?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:ct:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ht=[];var dt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(dt||(dt={}));const pt={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},ft=dt.INFO,_t={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},gt=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=_t[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class mt{constructor(e){this.name=e,this._logLevel=ft,this._logHandler=gt,this._userLogHandler=null,ht.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?pt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}class vt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const yt="@firebase/app",wt="0.7.12",bt=new mt("@firebase/app"),Ct={[yt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},It=new Map,Tt=new Map;function kt(e,t){try{e.container.addComponent(t)}catch(n){bt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Et(e){const t=e.name;if(Tt.has(t))return bt.debug(`There were multiple attempts to register component ${t}.`),!1;Tt.set(t,e);for(const t of It.values())kt(t,e);return!0}function St(e,t){return e.container.getProvider(t)}const Pt=new qe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Nt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new at("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}const Rt="9.6.2";function xt(e="[DEFAULT]"){const t=It.get(e);if(!t)throw Pt.create("no-app",{appName:e});return t}function Ot(e,t,n){var i;let r=null!==(i=Ct[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void bt.warn(e.join(" "))}Et(new at(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}Et(new at("platform-logger",(e=>new vt(e)),"PRIVATE")),Ot(yt,wt,""),Ot(yt,wt,"esm2017"),Ot("fire-js",""),Ot("firebase","9.6.2","app");const At="@firebase/database",Dt="0.12.5";let Mt="";class Lt{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),He(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ze(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class $t{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Be(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ft=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Lt(t)}}catch(e){}return new $t},jt=Ft("localStorage"),Ut=Ft("sessionStorage"),qt=new mt("@firebase/database"),Wt=function(){let e=1;return function(){return e++}}(),zt=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,Ne(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new tt;n.update(t);const i=n.digest();return Oe.encodeByteArray(i)},Ht=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Ht.apply(null,i):t+="object"==typeof i?He(i):i,t+=" "}return t};let Vt=null,Bt=!0;const Gt=function(...e){if(!0===Bt&&(Bt=!1,null===Vt&&!0===Ut.get("logging_enabled")&&(t=!0,Ne(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(qt.logLevel=dt.VERBOSE,Vt=qt.log.bind(qt),n&&Ut.set("logging_enabled",!0)):"function"==typeof t?Vt=t:(Vt=null,Ut.remove("logging_enabled")))),Vt){const t=Ht.apply(null,e);Vt(t)}var t,n},Kt=function(e){return function(...t){Gt(e,...t)}},Yt=function(...e){const t="FIREBASE INTERNAL ERROR: "+Ht(...e);qt.error(t)},Jt=function(...e){const t=`FIREBASE FATAL ERROR: ${Ht(...e)}`;throw qt.error(t),new Error(t)},Qt=function(...e){const t="FIREBASE WARNING: "+Ht(...e);qt.warn(t)},Xt=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Zt="[MIN_NAME]",en="[MAX_NAME]",tn=function(e,t){if(e===t)return 0;if(e===Zt||t===en)return-1;if(t===Zt||e===en)return 1;{const n=un(e),i=un(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},nn=function(e,t){return e===t?0:e<t?-1:1},rn=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+He(t))},sn=function(e){if("object"!=typeof e||null===e)return He(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=He(t[i]),n+=":",n+=sn(e[t[i]]);return n+="}",n},on=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function an(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const cn=function(e){Ne(!Xt(e),"Invalid JSON number");let t,n,i,r,s;0===e?(n=0,i=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=r+1023,i=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(s=52;s;s-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();const a=o.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()},ln=new RegExp("^-?(0*)\\d{1,10}$"),un=function(e){if(ln.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},hn=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Qt("Exception was thrown by user callback.",t),e}),Math.floor(0))}},dn=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class pn{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Qt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class fn{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qt(e)}}class _n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}_n.OWNER="owner";const gn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mn="websocket",vn="long_polling";class yn{constructor(e,t,n,i,r=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jt.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function wn(e,t,n){let i;if(Ne("string"==typeof t,"typeof type must == string"),Ne("object"==typeof n,"typeof params must == object"),t===mn)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==vn)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return an(n,((e,t)=>{r.push(e+"="+t)})),i+r.join("&")}class bn{constructor(){this.counters_={}}incrementCounter(e,t=1){Be(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return De(this.counters_)}}const Cn={},In={};function Tn(e){const t=e.toString();return Cn[t]||(Cn[t]=new bn),Cn[t]}class kn{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&hn((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class En{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kt(e),this.stats_=Tn(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),wn(t,vn,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new kn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sn(((...e)=>{const[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=i;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&gn.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){En.forceAllow_=!0}static forceDisallow(){En.forceDisallow_=!0}static isAvailable(){return!(!En.forceAllow_&&(En.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=He(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=function(e){const t=xe(e);return Oe.encodeByteArray(t,!0)}(t),i=on(n,1840);for(let e=0;e<i.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=He(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Sn{constructor(e,t,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Wt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Sn.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){Gt("frame writing exception"),e.stack&&Gt(e.stack),Gt(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Gt("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(i),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Gt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let Pn=null;"undefined"!=typeof MozWebSocket?Pn=MozWebSocket:"undefined"!=typeof WebSocket&&(Pn=WebSocket);class Nn{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kt(this.connId),this.stats_=Tn(t),this.connURL=Nn.connectionURL_(t,s,o,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i){const r={v:"5"};return"undefined"!=typeof location&&location.hostname&&gn.test(location.hostname)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),i&&(r.ac=i),wn(e,mn,r)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jt.set("previous_websocket_failure",!0);try{{const e={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Pn(this.connURL,[],e)}}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Nn.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Pn&&!Nn.forceDisallow_}static previouslyFailed(){return jt.isInMemoryStorage||!0===jt.get("previous_websocket_failure")}markConnectionHealthy(){jt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=ze(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ne(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=He(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=on(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Nn.responsesRequiredToBeHealthy=2,Nn.healthyTimeout=3e4;class Rn{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[En,Nn]}initTransports_(e){const t=Nn&&Nn.isAvailable();let n=t&&!Nn.previouslyFailed();if(e.webSocketOnly&&(t||Qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Nn];else{const e=this.transports_=[];for(const t of Rn.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class xn{constructor(e,t,n,i,r,s,o,a,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kt("c:"+this.id+":"),this.transportManager_=new Rn(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=dn((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=rn("t",e),n=rn("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=rn("t",e),n=rn("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=rn("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Yt("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yt("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&Qt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),dn((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):dn((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class On{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class An{constructor(e){this.allowedEvents_=e,this.listeners_={},Ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let e=0;e<i.length;e++)if(i[e].callback===t&&(!n||n===i[e].context))return void i.splice(e,1)}validateEventType_(e){Ne(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Dn extends An{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Fe()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Dn}getInitialEvent(e){return Ne("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ln(){return new Mn("")}function $n(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Fn(e){return e.pieces_.length-e.pieceNum_}function jn(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Mn(e.pieces_,t)}function Un(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function qn(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Wn(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Mn(t,0)}function zn(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof Mn)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Mn(n,0)}function Hn(e){return e.pieceNum_>=e.pieces_.length}function Vn(e,t){const n=$n(e),i=$n(t);if(null===n)return t;if(n===i)return Vn(jn(e),jn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Bn(e,t){const n=qn(e,0),i=qn(t,0);for(let e=0;e<n.length&&e<i.length;e++){const t=tn(n[e],i[e]);if(0!==t)return t}return n.length===i.length?0:n.length<i.length?-1:1}function Gn(e,t){if(Fn(e)!==Fn(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Kn(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Fn(e)>Fn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Yn{constructor(e,t){this.errorPrefix_=t,this.parts_=qn(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=st(this.parts_[e]);Jn(this)}}function Jn(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Qn(e))}function Qn(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Xn extends An{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Xn}getInitialEvent(e){return Ne("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Zn=1e3;class ei extends On{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=ei.nextPersistentConnectionId_++,this.log_=Kt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zn,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xn.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Dn.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(He(r)),Ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new Le,n={p:e._path.toString(),q:e._queryObject},i={action:"g",request:n,onComplete:e=>{const i=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,i,!1,null),t.resolve(i)):t.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const e=this.outstandingGets_[r];void 0!==e&&i===e&&(delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+r+" timed out on connection"),t.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ne(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,(r=>{const s=r.d,o=r.s;ei.warnOnListenWarnings_(s,t),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&Be(e,"w")){const n=Ge(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Qt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Ve(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Ve(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{i&&setTimeout((()=>{i(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+He(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Yt("Unrecognized action received from server: "+He(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Zn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ei.nextConnectionId_++,r=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},c=function(e){Ne(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:c};const l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);s?Gt("getToken() completed but was canceled"):(Gt("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=c&&c.token,o=new xn(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Qt(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&Qt(e),a())}}}interrupt(e){Gt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Gt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ke(this.interruptReasons_)&&(this.reconnectDelay_=Zn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>sn(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new Mn(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){Gt("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Gt("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Mt.replace(/\./g,"-")]=1,Fe()?e["framework.cordova"]=1:je()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Dn.getInstance().currentlyOnline();return Ke(this.interruptReasons_)&&e}}ei.nextPersistentConnectionId_=0,ei.nextConnectionId_=0;class ti{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ti(e,t)}}class ni{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new ti(Zt,e),i=new ti(Zt,t);return 0!==this.compare(n,i)}minPost(){return ti.MIN}}let ii;class ri extends ni{static get __EMPTY_NODE(){return ii}static set __EMPTY_NODE(e){ii=e}compare(e,t){return tn(e.name,t.name)}isDefinedOn(e){throw Re("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ti.MIN}maxPost(){return new ti(en,ii)}makePost(e,t){return Ne("string"==typeof e,"KeyIndex indexValue must always be a string."),new ti(e,ii)}toString(){return".key"}}const si=new ri;class oi{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ai{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:ai.RED,this.left=null!=i?i:ci.EMPTY_NODE,this.right=null!=r?r:ci.EMPTY_NODE}copy(e,t,n,i,r){return new ai(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ci.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ci.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ai.RED=!0,ai.BLACK=!1;class ci{constructor(e,t=ci.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ci(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ai.BLACK,null,null))}remove(e){return new ci(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ai.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new oi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new oi(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new oi(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new oi(this.root_,null,this.comparator_,!0,e)}}function li(e,t){return tn(e.name,t.name)}function ui(e,t){return tn(e,t)}let hi;ci.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new ai(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const di=function(e){return"number"==typeof e?"number:"+cn(e):"string:"+e},pi=function(e){if(e.isLeafNode()){const t=e.val();Ne("string"==typeof t||"number"==typeof t||"object"==typeof t&&Be(t,".sv"),"Priority must be a string or number.")}else Ne(e===hi||e.isEmpty(),"priority of unexpected type.");Ne(e===hi||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fi,_i,gi;class mi{constructor(e,t=mi.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ne(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),pi(this.priorityNode_)}static set __childrenNodeConstructor(e){fi=e}static get __childrenNodeConstructor(){return fi}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new mi(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:mi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Hn(e)?this:".priority"===$n(e)?this.priorityNode_:mi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:mi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=$n(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ne(".priority"!==n||1===Fn(e),".priority must be the last token in a path"),this.updateImmediateChild(n,mi.__childrenNodeConstructor.EMPTY_NODE.updateChild(jn(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+di(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?cn(this.value_):this.value_,this.lazyHash_=zt(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===mi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof mi.__childrenNodeConstructor?-1:(Ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=mi.VALUE_TYPE_ORDER.indexOf(t),r=mi.VALUE_TYPE_ORDER.indexOf(n);return Ne(i>=0,"Unknown leaf type: "+t),Ne(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}mi.VALUE_TYPE_ORDER=["object","boolean","number","string"];const vi=new class extends ni{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?tn(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ti.MIN}maxPost(){return new ti(en,new mi("[PRIORITY-POST]",gi))}makePost(e,t){const n=_i(e);return new ti(t,new mi("[PRIORITY-POST]",n))}toString(){return".priority"}},yi=Math.log(2);class wi{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/yi,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bi=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new ai(a,o.node,ai.BLACK,null,null);{const c=parseInt(s/2,10)+t,l=r(t,c),u=r(c+1,i);return o=e[c],a=n?n(o):o,new ai(a,o.node,ai.BLACK,l,u)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const l=r(s+1,a),u=e[s],h=n?n(u):u;c(new ai(h,u.node,i,null,l))},c=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,ai.BLACK):(a(i,ai.BLACK),a(i,ai.RED))}return s}(new wi(e.length));return new ci(i||t,s)};let Ci;const Ii={};class Ti{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Ne(Ii&&vi,"ChildrenNode.ts has not been loaded"),Ci=Ci||new Ti({".priority":Ii},{".priority":vi}),Ci}get(e){const t=Ge(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ci?t:null}hasIndex(e){return Be(this.indexSet_,e.toString())}addIndex(e,t){Ne(e!==si,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(ti.Wrap);let s,o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),n.push(o),o=r.getNext();s=i?bi(n,e.getCompare()):Ii;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const l=Object.assign({},this.indexes_);return l[a]=s,new Ti(l,c)}addToIndexes(e,t){const n=Ye(this.indexes_,((n,i)=>{const r=Ge(this.indexSet_,i);if(Ne(r,"Missing index implementation for "+i),n===Ii){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(ti.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),bi(n,r.getCompare())}return Ii}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new ti(e.name,i))),r.insert(e,e.node)}}));return new Ti(n,this.indexSet_)}removeFromIndexes(e,t){const n=Ye(this.indexes_,(n=>{if(n===Ii)return n;{const i=t.get(e.name);return i?n.remove(new ti(e.name,i)):n}}));return new Ti(n,this.indexSet_)}}let ki;class Ei{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&pi(this.priorityNode_),this.children_.isEmpty()&&Ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ki||(ki=new Ei(new ci(ui),null,Ti.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ki}updatePriority(e){return this.children_.isEmpty()?this:new Ei(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?ki:t}}getChild(e){const t=$n(e);return null===t?this:this.getImmediateChild(t).getChild(jn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ne(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new ti(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?ki:this.priorityNode_;return new Ei(i,s,r)}}updateChild(e,t){const n=$n(e);if(null===n)return t;{Ne(".priority"!==$n(e)||1===Fn(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(jn(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(vi,((s,o)=>{t[s]=o.val(e),n++,r&&Ei.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1})),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+di(this.getPriority().val())+":"),this.forEachChild(vi,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":zt(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new ti(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ti(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ti(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,ti.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,ti.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Si?-1:0}withIndex(e){if(e===si||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ei(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===si||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(vi),n=t.getIterator(vi);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===si?null:this.indexMap_.get(e.toString())}}Ei.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Si=new class extends Ei{constructor(){super(new ci(ui),Ei.EMPTY_NODE,Ti.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ei.EMPTY_NODE}isEmpty(){return!1}};function Pi(e,t=null){if(null===e)return Ei.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),Ne(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new mi(e,Pi(t));if(e instanceof Array){let n=Ei.EMPTY_NODE;return an(e,((t,i)=>{if(Be(e,t)&&"."!==t.substring(0,1)){const e=Pi(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Pi(t))}{const n=[];let i=!1;if(an(e,((e,t)=>{if("."!==e.substring(0,1)){const r=Pi(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new ti(e,r)))}})),0===n.length)return Ei.EMPTY_NODE;const r=bi(n,li,(e=>e.name),ui);if(i){const e=bi(n,vi.getCompare());return new Ei(r,Pi(t),new Ti({".priority":e},{".priority":vi}))}return new Ei(r,Pi(t),Ti.Default)}}Object.defineProperties(ti,{MIN:{value:new ti(Zt,Ei.EMPTY_NODE)},MAX:{value:new ti(en,Si)}}),ri.__EMPTY_NODE=Ei.EMPTY_NODE,mi.__childrenNodeConstructor=Ei,hi=Si,gi=Si,function(e){_i=e}(Pi);class Ni extends ni{constructor(e){super(),this.indexPath_=e,Ne(!Hn(e)&&".priority"!==$n(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?tn(e.name,t.name):r}makePost(e,t){const n=Pi(e),i=Ei.EMPTY_NODE.updateChild(this.indexPath_,n);return new ti(t,i)}maxPost(){const e=Ei.EMPTY_NODE.updateChild(this.indexPath_,Si);return new ti(en,e)}toString(){return qn(this.indexPath_,0).join("/")}}const Ri=new class extends ni{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?tn(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ti.MIN}maxPost(){return ti.MAX}makePost(e,t){const n=Pi(e);return new ti(t,n)}toString(){return".value"}};function xi(e){return{type:"value",snapshotNode:e}}function Oi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ai(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Di(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Mi{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){Ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Ai(t,o)):Ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Oi(t,n)):s.trackChildChange(Di(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(vi,((e,i)=>{t.hasChild(e)||n.trackChildChange(Ai(e,i))})),t.isLeafNode()||t.forEachChild(vi,((t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(Di(t,i,r))}else n.trackChildChange(Oi(t,i))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ei.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Li{constructor(e){this.indexedFilter_=new Mi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Li.getStartPost_(e),this.endPost_=Li.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,i,r,s){return this.matches(new ti(t,n))||(n=Ei.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Ei.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ei.EMPTY_NODE);const r=this;return t.forEachChild(vi,((e,t)=>{r.matches(new ti(e,t))||(i=i.updateImmediateChild(e,Ei.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class $i{constructor(e){this.rangedFilter_=new Li(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new ti(t,n))||(n=Ei.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=Ei.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=Ei.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let r;if(r=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!r)break;i=i.updateImmediateChild(t.name,t.node),n++}}else{let e,n,r,s;if(i=t.withIndex(this.index_),i=i.updatePriority(Ei.EMPTY_NODE),this.reverse_){s=i.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();r=(e,n)=>t(n,e)}else s=i.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),r=this.index_.getCompare();let o=0,a=!1;for(;s.hasNext();){const t=s.getNext();!a&&r(e,t)<=0&&(a=!0),a&&o<this.limit_&&r(t,n)<=0?o++:i=i.updateImmediateChild(t.name,Ei.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Ne(o.numChildren()===this.limit_,"");const a=new ti(t,n),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),l=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(l&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(Di(t,n,e)),o.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(Ai(t,e));const n=o.updateImmediateChild(t,Ei.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=r&&r.trackChildChange(Oi(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:l&&s(c,a)>=0?(null!=r&&(r.trackChildChange(Ai(c.name,c.node)),r.trackChildChange(Oi(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(c.name,Ei.EMPTY_NODE)):e}}class Fi{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zt}hasEnd(){return this.endSet_}getIndexEndValue(){return Ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:en}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vi}copy(){const e=new Fi;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ji(e){const t={};if(e.isDefault())return t;let n;return e.index_===vi?n="$priority":e.index_===Ri?n="$value":e.index_===si?n="$key":(Ne(e.index_ instanceof Ni,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=He(n),e.startSet_&&(t.startAt=He(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+He(e.indexStartName_))),e.endSet_&&(t.endAt=He(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+He(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Ui(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==vi&&(t.i=e.index_.toString()),t}class qi extends On{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=Kt("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=qi.getListenId_(e,n),o={};this.listens_[s]=o;const a=ji(e._queryParams);this.restRequest_(r+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),Ge(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=qi.getListenId_(e,t);delete this.listens_[n]}get(e){const t=ji(e._queryParams),n=e._path.toString(),i=new Le;return this.restRequest_(n+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xe(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=ze(o.responseText)}catch(e){Qt("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&Qt("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}class Wi{constructor(){this.rootNode_=Ei.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function zi(){return{value:null,children:new Map}}function Hi(e,t,n){if(Hn(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=$n(t);e.children.has(i)||e.children.set(i,zi()),Hi(e.children.get(i),t=jn(t),n)}}function Vi(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,i)=>{Vi(i,new Mn(t.toString()+"/"+e),n)}))}class Bi{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&an(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Gi{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Bi(e);const n=1e4+2e4*Math.random();dn(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;an(e,((e,i)=>{i>0&&Be(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),dn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ki;function Yi(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ki||(Ki={}));class Ji{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ki.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Hn(this.path)){if(null!=this.affectedTree.value)return Ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Mn(e));return new Ji(Ln(),t,this.revert)}}return Ne($n(this.path)===e,"operationForChild called for unrelated child."),new Ji(jn(this.path),this.affectedTree,this.revert)}}class Qi{constructor(e,t){this.source=e,this.path=t,this.type=Ki.LISTEN_COMPLETE}operationForChild(e){return Hn(this.path)?new Qi(this.source,Ln()):new Qi(this.source,jn(this.path))}}class Xi{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ki.OVERWRITE}operationForChild(e){return Hn(this.path)?new Xi(this.source,Ln(),this.snap.getImmediateChild(e)):new Xi(this.source,jn(this.path),this.snap)}}class Zi{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ki.MERGE}operationForChild(e){if(Hn(this.path)){const t=this.children.subtree(new Mn(e));return t.isEmpty()?null:t.value?new Xi(this.source,Ln(),t.value):new Zi(this.source,Ln(),t)}return Ne($n(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Zi(this.source,jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class er{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Hn(e))return this.isFullyInitialized()&&!this.filtered_;const t=$n(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class tr{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nr(e,t,n,i,r,s){const o=i.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Re("Should only compare child_ events.");const i=new ti(t.childName,t.snapshotNode),r=new ti(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n))),o.forEach((n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach((r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))}))}))}function ir(e,t){return{eventCache:e,serverCache:t}}function rr(e,t,n,i){return ir(new er(t,n,i),e.serverCache)}function sr(e,t,n,i){return ir(e.eventCache,new er(t,n,i))}function or(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ar(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let cr;class lr{constructor(e,t=(()=>(cr||(cr=new ci(nn)),cr))()){this.value=e,this.children=t}static fromObject(e){let t=new lr(null);return an(e,((e,n)=>{t=t.set(new Mn(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ln(),value:this.value};if(Hn(e))return null;{const n=$n(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(jn(e),t);return null!=r?{path:zn(new Mn(n),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Hn(e))return this;{const t=$n(e),n=this.children.get(t);return null!==n?n.subtree(jn(e)):new lr(null)}}set(e,t){if(Hn(e))return new lr(t,this.children);{const n=$n(e),i=(this.children.get(n)||new lr(null)).set(jn(e),t),r=this.children.insert(n,i);return new lr(this.value,r)}}remove(e){if(Hn(e))return this.children.isEmpty()?new lr(null):new lr(null,this.children);{const t=$n(e),n=this.children.get(t);if(n){const i=n.remove(jn(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new lr(null):new lr(this.value,r)}return this}}get(e){if(Hn(e))return this.value;{const t=$n(e),n=this.children.get(t);return n?n.get(jn(e)):null}}setTree(e,t){if(Hn(e))return t;{const n=$n(e),i=(this.children.get(n)||new lr(null)).setTree(jn(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new lr(this.value,r)}}fold(e){return this.fold_(Ln(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(zn(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Ln(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(Hn(e))return null;{const i=$n(e),r=this.children.get(i);return r?r.findOnPath_(jn(e),zn(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ln(),t)}foreachOnPath_(e,t,n){if(Hn(e))return this;{this.value&&n(t,this.value);const i=$n(e),r=this.children.get(i);return r?r.foreachOnPath_(jn(e),zn(t,i),n):new lr(null)}}foreach(e){this.foreach_(Ln(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(zn(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class ur{constructor(e){this.writeTree_=e}static empty(){return new ur(new lr(null))}}function hr(e,t,n){if(Hn(t))return new ur(new lr(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=Vn(r,t);return s=s.updateChild(o,n),new ur(e.writeTree_.set(r,s))}{const i=new lr(n),r=e.writeTree_.setTree(t,i);return new ur(r)}}}function dr(e,t,n){let i=e;return an(n,((e,n)=>{i=hr(i,zn(t,e),n)})),i}function pr(e,t){if(Hn(t))return ur.empty();{const n=e.writeTree_.setTree(t,new lr(null));return new ur(n)}}function fr(e,t){return null!=_r(e,t)}function _r(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Vn(n.path,t)):null}function gr(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(vi,((e,n)=>{t.push(new ti(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new ti(e,n.value))})),t}function mr(e,t){if(Hn(t))return e;{const n=_r(e,t);return new ur(null!=n?new lr(n):e.writeTree_.subtree(t))}}function vr(e){return e.writeTree_.isEmpty()}function yr(e,t){return wr(Ln(),e.writeTree_,t)}function wr(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?(Ne(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=wr(zn(e,t),r,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(zn(e,".priority"),i)),n}}function br(e,t){return Or(t,e)}function Cr(e,t){if(e.snap)return Kn(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Kn(zn(e.path,n),t))return!0;return!1}function Ir(e){return e.visible}function Tr(e,t,n){let i=ur.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)Kn(n,e)?(t=Vn(n,e),i=hr(i,t,s.snap)):Kn(e,n)&&(t=Vn(e,n),i=hr(i,Ln(),s.snap.getChild(t)));else{if(!s.children)throw Re("WriteRecord should have .snap or .children");if(Kn(n,e))t=Vn(n,e),i=dr(i,t,s.children);else if(Kn(e,n))if(t=Vn(e,n),Hn(t))i=dr(i,Ln(),s.children);else{const e=Ge(s.children,$n(t));if(e){const n=e.getChild(jn(t));i=hr(i,Ln(),n)}}}}}return i}function kr(e,t,n,i,r){if(i||r){const s=mr(e.visibleWrites,t);if(!r&&vr(s))return n;if(r||null!=n||fr(s,Ln())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(Kn(e.path,t)||Kn(t,e.path))};return yr(Tr(e.allWrites,s,t),n||Ei.EMPTY_NODE)}return null}{const i=_r(e.visibleWrites,t);if(null!=i)return i;{const i=mr(e.visibleWrites,t);return vr(i)?n:null!=n||fr(i,Ln())?yr(i,n||Ei.EMPTY_NODE):null}}}function Er(e,t,n,i){return kr(e.writeTree,e.treePath,t,n,i)}function Sr(e,t){return function(e,t,n){let i=Ei.EMPTY_NODE;const r=_r(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(vi,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const r=mr(e.visibleWrites,t);return n.forEachChild(vi,((e,t)=>{const n=yr(mr(r,new Mn(e)),t);i=i.updateImmediateChild(e,n)})),gr(r).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}return gr(mr(e.visibleWrites,t)).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function Pr(e,t,n,i){return function(e,t,n,i,r){Ne(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=zn(t,n);if(fr(e.visibleWrites,s))return null;{const t=mr(e.visibleWrites,s);return vr(t)?r.getChild(n):yr(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function Nr(e,t){return function(e,t){return _r(e.visibleWrites,t)}(e.writeTree,zn(e.treePath,t))}function Rr(e,t,n){return function(e,t,n,i){const r=zn(t,n),s=_r(e.visibleWrites,r);return null!=s?s:i.isCompleteForChild(n)?yr(mr(e.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function xr(e,t){return Or(zn(e.treePath,t),e.writeTree)}function Or(e,t){return{treePath:e,writeTree:t}}class Ar{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ne("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ne(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,Di(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,Ai(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,Oi(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw Re("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,Di(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Dr=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Mr{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rr(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ar(this.viewCache_),r=function(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const c=mr(e.visibleWrites,t),l=_r(c,Ln());if(null!=l)a=l;else{if(null==n)return[];a=yr(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let c=n.getNext();for(;c&&e.length<r;)0!==t(c,i)&&e.push(c),c=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function Lr(e,t,n,i,r,s){const o=t.eventCache;if(null!=Nr(i,n))return t;{let a,c;if(Hn(n))if(Ne(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ar(t),r=Sr(i,n instanceof Ei?n:Ei.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=Er(i,ar(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const l=$n(n);if(".priority"===l){Ne(1===Fn(n),"Can't have a priority with additional path components");const r=o.getNode();c=t.serverCache.getNode();const s=Pr(i,n,r,c);a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{const u=jn(n);let h;if(o.isCompleteForChild(l)){c=t.serverCache.getNode();const e=Pr(i,n,o.getNode(),c);h=null!=e?o.getNode().getImmediateChild(l).updateChild(u,e):o.getNode().getImmediateChild(l)}else h=Rr(i,l,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),l,h,u,r,s):o.getNode()}}return rr(t,a,o.isFullyInitialized()||Hn(n),e.filter.filtersNodes())}}function $r(e,t,n,i,r,s,o,a){const c=t.serverCache;let l;const u=o?e.filter:e.filter.getIndexedFilter();if(Hn(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){const e=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),e,null)}else{const e=$n(n);if(!c.isCompleteForPath(n)&&Fn(n)>1)return t;const r=jn(n),s=c.getNode().getImmediateChild(e).updateChild(r,i);l=".priority"===e?u.updatePriority(c.getNode(),s):u.updateChild(c.getNode(),e,s,r,Dr,null)}const h=sr(t,l,c.isFullyInitialized()||Hn(n),u.filtersNodes());return Lr(e,h,n,r,new Mr(r,h,s),a)}function Fr(e,t,n,i,r,s,o){const a=t.eventCache;let c,l;const u=new Mr(r,t,s);if(Hn(n))l=e.filter.updateFullNode(t.eventCache.getNode(),i,o),c=rr(t,l,!0,e.filter.filtersNodes());else{const r=$n(n);if(".priority"===r)l=e.filter.updatePriority(t.eventCache.getNode(),i),c=rr(t,l,a.isFullyInitialized(),a.isFiltered());else{const s=jn(n),l=a.getNode().getImmediateChild(r);let h;if(Hn(s))h=i;else{const e=u.getCompleteChild(r);h=null!=e?".priority"===Un(s)&&e.getChild(Wn(s)).isEmpty()?e:e.updateChild(s,i):Ei.EMPTY_NODE}c=l.equals(h)?t:rr(t,e.filter.updateChild(a.getNode(),r,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return c}function jr(e,t){return e.eventCache.isCompleteForChild(t)}function Ur(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function qr(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c,l=t;c=Hn(n)?i:new lr(null).setTree(n,i);const u=t.serverCache.getNode();return c.children.inorderTraversal(((n,i)=>{if(u.hasChild(n)){const c=Ur(0,t.serverCache.getNode().getImmediateChild(n),i);l=$r(e,l,new Mn(n),c,r,s,o,a)}})),c.children.inorderTraversal(((n,i)=>{const c=!t.serverCache.isCompleteForChild(n)&&void 0===i.value;if(!u.hasChild(n)&&!c){const c=Ur(0,t.serverCache.getNode().getImmediateChild(n),i);l=$r(e,l,new Mn(n),c,r,s,o,a)}})),l}class Wr{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Mi(n.getIndex()),r=(s=n).loadsAllData()?new Mi(s.getIndex()):s.hasLimit()?new $i(s):new Li(s);var s;this.processor_=function(e){return{filter:e}}(r);const o=t.serverCache,a=t.eventCache,c=i.updateFullNode(Ei.EMPTY_NODE,o.getNode(),null),l=r.updateFullNode(Ei.EMPTY_NODE,a.getNode(),null),u=new er(c,o.isFullyInitialized(),i.filtersNodes()),h=new er(l,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=ir(h,u),this.eventGenerator_=new tr(this.query_)}get query(){return this.query_}}function zr(e,t){const n=ar(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Hn(t)&&!n.getImmediateChild($n(t)).isEmpty())?n.getChild(t):null}function Hr(e){return 0===e.eventRegistrations_.length}function Vr(e,t,n){const i=[];if(n){Ne(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)}))}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function Br(e,t,n,i){t.type===Ki.MERGE&&null!==t.source.queryId&&(Ne(ar(e.viewCache_),"We should always have a full cache before handling merges"),Ne(or(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=function(e,t,n,i,r){const s=new Ar;let o,a;if(n.type===Ki.OVERWRITE){const c=n;c.source.fromUser?o=Fr(e,t,c.path,c.snap,i,r,s):(Ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!Hn(c.path),o=$r(e,t,c.path,c.snap,i,r,a,s))}else if(n.type===Ki.MERGE){const c=n;c.source.fromUser?o=function(e,t,n,i,r,s,o){let a=t;return i.foreach(((i,c)=>{const l=zn(n,i);jr(t,$n(l))&&(a=Fr(e,a,l,c,r,s,o))})),i.foreach(((i,c)=>{const l=zn(n,i);jr(t,$n(l))||(a=Fr(e,a,l,c,r,s,o))})),a}(e,t,c.path,c.children,i,r,s):(Ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=qr(e,t,c.path,c.children,i,r,a,s))}else if(n.type===Ki.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,i,r,s){let o;if(null!=Nr(i,n))return t;{const a=new Mr(i,t,r),c=t.eventCache.getNode();let l;if(Hn(n)||".priority"===$n(n)){let n;if(t.serverCache.isFullyInitialized())n=Er(i,ar(t));else{const e=t.serverCache.getNode();Ne(e instanceof Ei,"serverChildren would be complete if leaf node"),n=Sr(i,e)}n=n,l=e.filter.updateFullNode(c,n,s)}else{const r=$n(n);let u=Rr(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=c.getImmediateChild(r)),l=null!=u?e.filter.updateChild(c,r,u,jn(n),a,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(c,r,Ei.EMPTY_NODE,jn(n),a,s):c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Er(i,ar(t)),o.isLeafNode()&&(l=e.filter.updateFullNode(l,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Nr(i,Ln()),rr(t,l,o,e.filter.filtersNodes())}}(e,t,a.path,i,r,s):function(e,t,n,i,r,s,o){if(null!=Nr(r,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=i.value){if(Hn(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return $r(e,t,n,c.getNode().getChild(n),r,s,a,o);if(Hn(n)){let i=new lr(null);return c.getNode().forEachChild(si,((e,t)=>{i=i.set(new Mn(e),t)})),qr(e,t,n,i,r,s,a,o)}return t}{let l=new lr(null);return i.foreach(((e,t)=>{const i=zn(n,e);c.isCompleteForPath(i)&&(l=l.set(e,c.getNode().getChild(i)))})),qr(e,t,n,l,r,s,a,o)}}(e,t,a.path,a.affectedTree,i,r,s)}else{if(n.type!==Ki.LISTEN_COMPLETE)throw Re("Unknown operation type: "+n.type);o=function(e,t,n,i,r){const s=t.serverCache;return Lr(e,sr(t,s.getNode(),s.isFullyInitialized()||Hn(n),s.isFiltered()),n,i,Dr,r)}(e,t,n.path,i,s)}const c=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=or(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(xi(or(t)))}}(t,o,c),{viewCache:o,changes:c}}(e.processor_,r,t,n,i);var o,a;return o=e.processor_,a=s.viewCache,Ne(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Ne(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Ne(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Gr(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Gr(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),nr(e,r,"child_removed",t,i,n),nr(e,r,"child_added",t,i,n),nr(e,r,"child_moved",s,i,n),nr(e,r,"child_changed",t,i,n),nr(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let Kr,Yr;class Jr{constructor(){this.views=new Map}}function Qr(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return Ne(null!=s,"SyncTree gave us an op for an invalid query."),Br(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(Br(s,t,n,i));return r}}function Xr(e,t,n,i,r,s){const o=function(e,t,n,i,r){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Er(n,r?i:null),s=!1;e?s=!0:i instanceof Ei?(e=Sr(n,i),s=!1):(e=Ei.EMPTY_NODE,s=!1);const o=ir(new er(e,s,!1),new er(i,r,!1));return new Wr(t,o)}return o}(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(vi,((e,t)=>{i.push(Oi(e,t))})),n.isFullyInitialized()&&i.push(xi(n.getNode())),Gr(e,i,n.getNode(),t)}(o,n)}function Zr(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function es(e,t){let n=null;for(const i of e.views.values())n=n||zr(i,t);return n}function ts(e,t){if(t._queryParams.loadsAllData())return rs(e);{const n=t._queryIdentifier;return e.views.get(n)}}function ns(e,t){return null!=ts(e,t)}function is(e){return null!=rs(e)}function rs(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let ss=1;class os{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lr(null),this.pendingWriteTree_={visibleWrites:ur.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function as(e,t,n,i,r){return function(e,t,n,i,r){Ne(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=hr(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?ps(e,new Xi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function cs(e,t,n=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Ne(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Cr(t,i.path)?r=!1:Kn(i.path,t.path)&&(s=!0)),o--}return!!r&&(s?(function(e){e.visibleWrites=Tr(e.allWrites,Ir,Ln()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(i.snap?e.visibleWrites=pr(e.visibleWrites,i.path):an(i.children,(t=>{e.visibleWrites=pr(e.visibleWrites,zn(i.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new lr(null);return null!=i.snap?t=t.set(Ln(),!0):an(i.children,(e=>{t=t.set(new Mn(e),!0)})),ps(e,new Ji(i.path,t,n))}return[]}function ls(e,t,n){return ps(e,new Xi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function us(e,t,n,i){const r=t._path,s=e.syncPointTree_.get(r);let o=[];if(s&&("default"===t._queryIdentifier||ns(s,t))){const a=function(e,t,n,i){const r=t._queryIdentifier,s=[];let o=[];const a=is(e);if("default"===r)for(const[t,r]of e.views.entries())o=o.concat(Vr(r,n,i)),Hr(r)&&(e.views.delete(t),r.query._queryParams.loadsAllData()||s.push(r.query));else{const t=e.views.get(r);t&&(o=o.concat(Vr(t,n,i)),Hr(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!is(e)&&s.push(new(Ne(Kr,"Reference.ts has not been loaded"),Kr)(t._repo,t._path)),{removed:s,events:o}}(s,t,n,i);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(r));const c=a.removed;o=a.events;const l=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),u=e.syncPointTree_.findOnPath(r,((e,t)=>is(t)));if(l&&!u){const t=e.syncPointTree_.subtree(r);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&is(t))return[rs(t)];{let e=[];return t&&(e=Zr(t)),an(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=gs(e,i);e.listenProvider_.startListening(Cs(r),ms(e,r),s.hashFn,s.onComplete)}}}if(!u&&c.length>0&&!i)if(l){const n=null;e.listenProvider_.stopListening(Cs(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(vs(t));e.listenProvider_.stopListening(Cs(t),n)}));!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=vs(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function hs(e,t,n){const i=t._path;let r=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Vn(e,i);r=r||es(t,n),s=s||is(t)}));let o,a=e.syncPointTree_.get(i);a?(s=s||is(a),r=r||es(a,Ln())):(a=new Jr,e.syncPointTree_=e.syncPointTree_.set(i,a)),null!=r?o=!0:(o=!1,r=Ei.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=es(t,Ln());n&&(r=r.updateImmediateChild(e,n))})));const c=ns(a,t);if(!c&&!t._queryParams.loadsAllData()){const n=vs(t);Ne(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=ss++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let l=Xr(a,t,n,br(e.pendingWriteTree_,i),r,o);if(!c&&!s){const n=ts(a,t);l=l.concat(function(e,t,n){const i=t._path,r=ms(e,t),s=gs(e,n),o=e.listenProvider_.startListening(Cs(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)Ne(!is(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!Hn(e)&&t&&is(t))return[rs(t).query];{let e=[];return t&&(e=e.concat(Zr(t).map((e=>e.query)))),an(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(Cs(i),ms(e,i))}}return o}(e,t,n))}return l}function ds(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=es(n,Vn(e,t));if(i)return i}));return kr(i,t,r,n,!0)}function ps(e,t){return fs(t,e.syncPointTree_,null,br(e.pendingWriteTree_,Ln()))}function fs(e,t,n,i){if(Hn(e.path))return _s(e,t,n,i);{const r=t.get(Ln());null==n&&null!=r&&(n=es(r,Ln()));let s=[];const o=$n(e.path),a=e.operationForChild(o),c=t.children.get(o);if(c&&a){const e=n?n.getImmediateChild(o):null,t=xr(i,o);s=s.concat(fs(a,c,e,t))}return r&&(s=s.concat(Qr(r,e,i,n))),s}}function _s(e,t,n,i){const r=t.get(Ln());null==n&&null!=r&&(n=es(r,Ln()));let s=[];return t.children.inorderTraversal(((t,r)=>{const o=n?n.getImmediateChild(t):null,a=xr(i,t),c=e.operationForChild(t);c&&(s=s.concat(_s(c,r,o,a)))})),r&&(s=s.concat(Qr(r,e,i,n))),s}function gs(e,t){const n=t.query,i=ms(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Ei.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=ys(e,n);if(i){const n=ws(i),r=n.path,s=n.queryId,o=Vn(r,t);return bs(e,r,new Qi(Yi(s),o))}return[]}(e,n._path,i):function(e,t){return ps(e,new Qi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return us(e,n,null,i)}}}}function ms(e,t){const n=vs(t);return e.queryToTagMap.get(n)}function vs(e){return e._path.toString()+"$"+e._queryIdentifier}function ys(e,t){return e.tagToQueryMap.get(t)}function ws(e){const t=e.indexOf("$");return Ne(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Mn(e.substr(0,t))}}function bs(e,t,n){const i=e.syncPointTree_.get(t);return Ne(i,"Missing sync point for query tag that we're tracking"),Qr(i,n,br(e.pendingWriteTree_,t),null)}function Cs(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ne(Yr,"Reference.ts has not been loaded"),Yr)(e._repo,e._path):e}class Is{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Is(t)}node(){return this.node_}}class Ts{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=zn(this.path_,e);return new Ts(this.syncTree_,t)}node(){return ds(this.syncTree_,this.path_)}}const ks=function(e,t,n){return e&&"object"==typeof e?(Ne(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Es(e[".sv"],t,n):"object"==typeof e[".sv"]?Ss(e[".sv"],t):void Ne(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Es=function(e,t,n){if("timestamp"===e)return n.timestamp;Ne(!1,"Unexpected server value: "+e)},Ss=function(e,t,n){e.hasOwnProperty("increment")||Ne(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&Ne(!1,"Unexpected increment value: "+i);const r=t.node();if(Ne(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},Ps=function(e,t,n,i){return Rs(t,new Ts(n,e),i)},Ns=function(e,t,n){return Rs(e,new Is(t),n)};function Rs(e,t,n){const i=e.getPriority().val(),r=ks(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=ks(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new mi(s,Pi(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new mi(r))),i.forEachChild(vi,((e,i)=>{const r=Rs(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))})),s}}class xs{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Os(e,t){let n=t instanceof Mn?t:new Mn(t),i=e,r=$n(n);for(;null!==r;){const e=Ge(i.node.children,r)||{children:{},childCount:0};i=new xs(r,i,e),n=jn(n),r=$n(n)}return i}function As(e){return e.node.value}function Ds(e,t){e.node.value=t,js(e)}function Ms(e){return e.node.childCount>0}function Ls(e,t){an(e.node.children,((n,i)=>{t(new xs(n,e,i))}))}function $s(e,t,n,i){n&&!i&&t(e),Ls(e,(e=>{$s(e,t,!0,i)})),n&&i&&t(e)}function Fs(e){return new Mn(null===e.parent?e.name:Fs(e.parent)+"/"+e.name)}function js(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===As(e)&&!Ms(e)}(n),r=Be(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,js(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,js(e))}(e.parent,e.name,e)}const Us=/[\[\].#$\/\u0000-\u001F\u007F]/,qs=/[\[\].#$\u0000-\u001F\u007F]/,Ws=10485760,zs=function(e){return"string"==typeof e&&0!==e.length&&!Us.test(e)},Hs=function(e){return"string"==typeof e&&0!==e.length&&!qs.test(e)},Vs=function(e,t,n){const i=n instanceof Mn?new Yn(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Qn(i));if("function"==typeof t)throw new Error(e+"contains a function "+Qn(i)+" with contents = "+t.toString());if(Xt(t))throw new Error(e+"contains "+t.toString()+" "+Qn(i));if("string"==typeof t&&t.length>Ws/3&&st(t)>Ws)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+Qn(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(an(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!zs(t)))throw new Error(e+" contains an invalid key ("+t+") "+Qn(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=st(t),Jn(e)}(i,t),Vs(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=st(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),n&&r)throw new Error(e+' contains ".value" child '+Qn(i)+" in addition to actual children.")}},Bs=function(e,t,n,i){if(i&&void 0===t)return;const r=rt(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];an(t,((e,t)=>{const i=new Mn(e);if(Vs(r,t,zn(n,i)),".priority"===Un(i)&&!(null===(o=t)||"string"==typeof o||"number"==typeof o&&!Xt(o)||o&&"object"==typeof o&&Be(o,".sv")))throw new Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");var o;s.push(i)})),function(e,t){let n,i;for(n=0;n<t.length;n++){i=t[n];const r=qn(i);for(let t=0;t<r.length;t++)if(".priority"===r[t]&&t===r.length-1);else if(!zs(r[t]))throw new Error(e+"contains an invalid key ("+r[t]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Bn);let r=null;for(n=0;n<t.length;n++){if(i=t[n],null!==r&&Kn(r,i))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},Gs=function(e,t,n,i){if(!(i&&void 0===n||Hs(n)))throw new Error(rt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class Ks{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ys(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||Gn(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function Js(e,t,n){Ys(e,n),Xs(e,(e=>Gn(e,t)))}function Qs(e,t,n){Ys(e,n),Xs(e,(e=>Kn(e,t)||Kn(t,e)))}function Xs(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];r&&(t(r.path)?(Zs(e.eventLists_[i]),e.eventLists_[i]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function Zs(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();Vt&&Gt("event: "+n.toString()),hn(i)}}}class eo{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ks,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zi(),this.transactionQueueTree_=new xs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function to(e,t,n){if(e.stats_=Tn(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new qi(e.repoInfo_,((t,n,i,r)=>{ro(e,t,n,i,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>so(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{He(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new ei(e.repoInfo_,t,((t,n,i,r)=>{ro(e,t,n,i,r)}),(t=>{so(e,t)}),(t=>{!function(e,t){an(t,((t,n)=>{oo(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const i=t.toString();return In[i]||(In[i]=new Gi(e.stats_,e.server_)),In[i]}(e.repoInfo_),e.infoData_=new Wi,e.infoSyncTree_=new os({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=ls(e.infoSyncTree_,t._path,o),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),oo(e,"connected",!1),e.serverSyncTree_=new os({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,((n,i)=>{const s=r(n,i);Qs(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function no(e){const t=e.infoData_.getNode(new Mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function io(e){return(t=(t={timestamp:no(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function ro(e,t,n,i,r){e.dataUpdateCount++;const s=new Mn(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(i){const t=Ye(n,(e=>Pi(e)));o=function(e,t,n,i){const r=ys(e,i);if(r){const i=ws(r),s=i.path,o=i.queryId,a=Vn(s,t),c=lr.fromObject(n);return bs(e,s,new Zi(Yi(o),a,c))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=Pi(n);o=function(e,t,n,i){const r=ys(e,i);if(null!=r){const i=ws(r),s=i.path,o=i.queryId,a=Vn(s,t);return bs(e,s,new Xi(Yi(o),a,n))}return[]}(e.serverSyncTree_,s,t,r)}else if(i){const t=Ye(n,(e=>Pi(e)));o=function(e,t,n){const i=lr.fromObject(n);return ps(e,new Zi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=Pi(n);o=ls(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=fo(e,s)),Qs(e.eventQueue_,a,o)}function so(e,t){oo(e,"connected",t),!1===t&&function(e){lo(e,"onDisconnectEvents");const t=io(e),n=zi();Vi(e.onDisconnect_,Ln(),((i,r)=>{const s=Ps(i,r,e.serverSyncTree_,t);Hi(n,i,s)}));let i=[];Vi(n,Ln(),((t,n)=>{i=i.concat(ls(e.serverSyncTree_,t,n));const r=yo(e,t);fo(e,r)})),e.onDisconnect_=zi(),Qs(e.eventQueue_,Ln(),i)}(e)}function oo(e,t,n){const i=new Mn("/.info/"+t),r=Pi(n);e.infoData_.updateSnapshot(i,r);const s=ls(e.infoSyncTree_,i,r);Qs(e.eventQueue_,i,s)}function ao(e){return e.nextWriteId_++}function co(e,t,n){let i;i=".info"===$n(t._path)?us(e.infoSyncTree_,t,n):us(e.serverSyncTree_,t,n),Js(e.eventQueue_,t._path,i)}function lo(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Gt(n,...t)}function uo(e,t,n,i){t&&hn((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}}))}function ho(e,t,n){return ds(e.serverSyncTree_,t,n)||Ei.EMPTY_NODE}function po(e,t=e.transactionQueueTree_){if(t||vo(e,t),As(t)){const n=go(e,t);Ne(n.length>0,"Sending zero length transaction queue"),n.every((e=>0===e.status))&&function(e,t,n){const i=n.map((e=>e.currentWriteId)),r=ho(e,t,i);let s=r;const o=r.hash();for(let e=0;e<n.length;e++){const i=n[e];Ne(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const r=Vn(t,i.path);s=s.updateChild(r,i.currentOutputSnapshotRaw)}const a=s.val(!0),c=t;e.server_.put(c.toString(),a,(i=>{lo(e,"transaction put response",{path:c.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(cs(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();vo(e,Os(e.transactionQueueTree_,t)),po(e,e.transactionQueueTree_),Qs(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)hn(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Qt("transaction at "+c.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}fo(e,t)}}),o)}(e,Fs(t),n)}else Ms(t)&&Ls(t,(t=>{po(e,t)}))}function fo(e,t){const n=_o(e,t),i=Fs(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter((e=>0===e.status)).map((e=>e.currentWriteId));for(let a=0;a<t.length;a++){const c=t[a],l=Vn(n,c.path);let u,h=!1;if(Ne(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,r=r.concat(cs(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",r=r.concat(cs(e.serverSyncTree_,c.currentWriteId,!0));else{const n=ho(e,c.path,s);c.currentInputSnapshot=n;const i=t[a].update(n.val());if(void 0!==i){Vs("transaction failed: Data returned ",i,c.path);let t=Pi(i);"object"==typeof i&&null!=i&&Be(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=c.currentWriteId,a=io(e),l=Ns(t,n,a);c.currentOutputSnapshotRaw=t,c.currentOutputSnapshotResolved=l,c.currentWriteId=ao(e),s.splice(s.indexOf(o),1),r=r.concat(as(e.serverSyncTree_,c.path,l,c.currentWriteId,c.applyLocally)),r=r.concat(cs(e.serverSyncTree_,o,!0))}else h=!0,u="nodata",r=r.concat(cs(e.serverSyncTree_,c.currentWriteId,!0))}Qs(e.eventQueue_,n,r),r=[],h&&(t[a].status=2,o=t[a].unwatcher,setTimeout(o,Math.floor(0)),t[a].onComplete&&("nodata"===u?i.push((()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot))):i.push((()=>t[a].onComplete(new Error(u),!1,null)))))}var o;vo(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)hn(i[e]);po(e,e.transactionQueueTree_)}(e,go(e,n),i),i}function _o(e,t){let n,i=e.transactionQueueTree_;for(n=$n(t);null!==n&&void 0===As(i);)i=Os(i,n),n=$n(t=jn(t));return i}function go(e,t){const n=[];return mo(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function mo(e,t,n){const i=As(t);if(i)for(let e=0;e<i.length;e++)n.push(i[e]);Ls(t,(t=>{mo(e,t,n)}))}function vo(e,t){const n=As(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Ds(t,n.length>0?n:void 0)}Ls(t,(t=>{vo(e,t)}))}function yo(e,t){const n=Fs(_o(e,t)),i=Os(e.transactionQueueTree_,t);return function(e,t,n){let i=e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,(t=>{wo(e,t)})),wo(e,i),$s(i,(t=>{wo(e,t)})),n}function wo(e,t){const n=As(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ne(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Ne(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(cs(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ds(t,void 0):n.length=s+1,Qs(e.eventQueue_,Fs(t),r);for(let e=0;e<i.length;e++)hn(i[e])}}const bo=function(e,t){const n=Co(e),i=n.namespace;"firebase.com"===n.domain&&Jt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||Jt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new yn(n.host,n.secure,i,t,r,"",i!==n.subdomain),path:new Mn(n.pathString)}},Co=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",c=443;if("string"==typeof e){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let i=n[e];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Qt(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));l=t.indexOf(":"),l>=0?(o="https"===a||"wss"===a,c=parseInt(t.substring(l+1),10)):l=t.length;const p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:c,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class Io{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+He(this.snapshot.exportVal())}}class To{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ko{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Eo{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return Hn(this._path)?null:Un(this._path)}get ref(){return new So(this._repo,this._path)}get _queryIdentifier(){const e=Ui(this._queryParams),t=sn(e);return"{}"===t?"default":t}get _queryObject(){return Ui(this._queryParams)}isEqual(e){if(!((e=ot(e))instanceof Eo))return!1;const t=this._repo===e._repo,n=Gn(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class So extends Eo{constructor(e,t){super(e,t,new Fi,!1)}get parent(){const e=Wn(this._path);return null===e?null:new So(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Po{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Mn(e),n=Ro(this.ref,e);return new Po(this._node.getChild(t),n,vi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,n)=>e(new Po(n,Ro(this.ref,t),vi))))}hasChild(e){const t=new Mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function No(e,t){return(e=ot(e))._checkNotDeleted("ref"),void 0!==t?Ro(e._root,t):e._root}function Ro(e,t){var n;return null===$n((e=ot(e))._path)?("child","path",!1,(n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Gs("child","path",n,false)):Gs("child","path",t,!1),new So(e._repo,zn(e._path,t))}function xo(e,t){(function(e,t){if(".info"===$n(t))throw new Error(e+" failed = Can't modify data under /.info/")})("set",(e=ot(e))._path),function(e,t,n,i){i&&void 0===t||Vs(rt(e,"value"),t,n)}("set",t,e._path,!1);const n=new Le;return function(e,t,n,i,r){lo(e,"set",{path:t.toString(),value:n,priority:i});const s=io(e),o=Pi(n,i),a=ds(e.serverSyncTree_,t),c=Ns(o,a,s),l=ao(e),u=as(e.serverSyncTree_,t,c,l,!0);Ys(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,i)=>{const s="ok"===n;s||Qt("set at "+t+" failed: "+n);const o=cs(e.serverSyncTree_,l,!s);Qs(e.eventQueue_,t,o),uo(0,r,n,i)}));const h=yo(e,t);fo(e,h),Qs(e.eventQueue_,h,[])}(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Oo(e,t){Bs("update",t,e._path,!1);const n=new Le;return function(e,t,n,i){lo(e,"update",{path:t.toString(),value:n});let r=!0;const s=io(e),o={};if(an(n,((n,i)=>{r=!1,o[n]=Ps(zn(t,n),Pi(i),e.serverSyncTree_,s)})),r)Gt("update() called with empty data.  Don't do anything."),uo(0,i,"ok",void 0);else{const r=ao(e),s=function(e,t,n,i){!function(e,t,n,i){Ne(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:i,visible:!0}),e.visibleWrites=dr(e.visibleWrites,t,n),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i);const r=lr.fromObject(n);return ps(e,new Zi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,t,o,r);Ys(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||Qt("update at "+t+" failed: "+n);const a=cs(e.serverSyncTree_,r,!o),c=a.length>0?fo(e,t):t;Qs(e.eventQueue_,c,a),uo(0,i,n,s)})),an(n,(n=>{const i=yo(e,zn(t,n));fo(e,i)})),Qs(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}class Ao{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Io("value",this,new Po(e.snapshotNode,new So(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new To(this,e,t):null}matches(e){return e instanceof Ao&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Do{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new To(this,e,t):null}createEvent(e,t){Ne(null!=e.childName,"Child events should have a childName.");const n=Ro(new So(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Io(e.type,this,new Po(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Do&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Mo(e,t,n,i){return function(e,t,n,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const t=n,i=(n,i)=>{co(e._repo,e,a),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const o=new ko(n,s||void 0),a="value"===t?new Ao(o):new Do(t,o);return function(e,t,n){let i;i=".info"===$n(t._path)?hs(e.infoSyncTree_,t,n):hs(e.serverSyncTree_,t,n),Js(e.eventQueue_,t._path,i)}(e._repo,e,a),()=>co(e._repo,e,a)}(e,"value",t,n,i)}!function(e){Ne(!Kr,"__referenceConstructor has already been defined"),Kr=e}(So),function(e){Ne(!Yr,"__referenceConstructor has already been defined"),Yr=e}(So);const Lo={};function $o(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||Jt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gt("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,c=bo(s,r),l=c.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${l.namespace}`,c=bo(s,r),l=c.repoInfo):o=!c.repoInfo.secure;const u=r&&o?new _n(_n.OWNER):new fn(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!zs(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Hs(e)}(n))throw new Error(rt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",c),Hn(c.path)||Jt("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,i){let r=Lo[t.name];r||(r={},Lo[t.name]=r);let s=r[e.toURLString()];return s&&Jt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new eo(e,false,n,i),r[e.toURLString()]=s,s}(l,e,u,new pn(e.name,n));return new Fo(h,e)}class Fo{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(to(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new So(this._repo,Ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=Lo[t];n&&n[e.key]===e||Jt(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Jt("Cannot call "+e+" on a deleted database.")}}function jo(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}ei.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ei.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},Mt="9.6.2",Et(new at("database",((e,{instanceIdentifier:t})=>$o(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),Ot(At,Dt,void 0),Ot(At,Dt,"esm2017"),Object.create,Object.create;const Uo=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qo=new qe("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wo=new mt("@firebase/auth");function zo(e,...t){Wo.logLevel<=dt.ERROR&&Wo.error(`Auth (9.6.2): ${e}`,...t)}function Ho(e,...t){throw Bo(e,...t)}function Vo(e,...t){return Bo(e,...t)}function Bo(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return qo.create(e,...t)}function Go(e,t,...n){if(!e)throw Bo(t,...n)}function Ko(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zo(t),new Error(t)}function Yo(e,t){e||Ko(t)}const Jo=new Map;function Qo(e){Yo(e instanceof Function,"Expected a class definition");let t=Jo.get(e);return t?(Yo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jo.set(e,t),t)}function Xo(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Zo(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ea(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Zo()||"https:"===Zo()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ta{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yo(t>e,"Short delay should be less than long delay!"),this.isMobile=Fe()||je()}get(){return ea()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function na(e,t){Yo(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class ia{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ko("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ko("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ko("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ra={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},sa=new ta(3e4,6e4);function oa(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function aa(e,t,n,i,r={}){return ca(e,r,(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=Xe(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),ia.fetch()(ua(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function ca(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},ra),t);try{const t=new ha(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw da(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw da(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw da(e,"email-already-in-use",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(e,t,n){const i=Object.assign(Object.assign({},Uo()),{[t]:n});return new qe("auth","Firebase",i).create(t,{appName:e.name})}(e,a,o);Ho(e,a)}}catch(t){if(t instanceof Ue)throw t;Ho(e,"network-request-failed")}}async function la(e,t,n,i,r={}){const s=await aa(e,t,n,i,r);return"mfaPendingCredential"in s&&Ho(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ua(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?na(e.config,r):`${e.config.apiScheme}://${r}`}class ha{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Vo(this.auth,"timeout"))),sa.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function da(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Vo(e,t,i);return r.customData._tokenResponse=n,r}function pa(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function fa(e){return 1e3*Number(e)}function _a(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return zo("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ae(n);return e?JSON.parse(e):(zo("Failed to decode base64 JWT payload"),null)}catch(e){return zo("Caught error parsing JWT payload as JSON",e),null}}async function ga(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Ue&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class ma{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class va{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pa(this.lastLoginAt),this.creationTime=pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ya(e){var t;const n=e.auth,i=await e.getIdToken(),r=await ga(e,async function(e,t){return aa(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));Go(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=jo(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new va(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,p)}class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Go(e.idToken,"internal-error"),Go(void 0!==e.idToken,"internal-error"),Go(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=_a(e);return Go(t,"internal-error"),Go(void 0!==t.exp,"internal-error"),Go(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Go(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await ca(e,{},(async()=>{const n=Xe({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=ua(e,i,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ia.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new wa;return n&&(Go("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(Go("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(Go("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return Ko("not implemented")}}function ba(e,t){Go("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Ca{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=jo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ma(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.metadata=new va(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await ga(this,this.stsTokenManager.getToken(this.auth,e));return Go(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=ot(e),i=await n.getIdToken(t),r=_a(i);Go(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:pa(fa(r.auth_time)),issuedAtTime:pa(fa(r.iat)),expirationTime:pa(fa(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ot(e);await ya(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Go(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Ca(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Go(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ya(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ga(this,async function(e,t){return aa(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,_=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,m=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:y,isAnonymous:w,providerData:b,stsTokenManager:C}=t;Go(v&&C,e,"internal-error");const I=wa.fromJSON(this.name,C);Go("string"==typeof v,e,"internal-error"),ba(u,e.name),ba(h,e.name),Go("boolean"==typeof y,e,"internal-error"),Go("boolean"==typeof w,e,"internal-error"),ba(d,e.name),ba(p,e.name),ba(f,e.name),ba(_,e.name),ba(g,e.name),ba(m,e.name);const T=new Ca({uid:v,auth:e,email:h,emailVerified:y,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:I,createdAt:g,lastLoginAt:m});return b&&Array.isArray(b)&&(T.providerData=b.map((e=>Object.assign({},e)))),_&&(T._redirectEventId=_),T}static async _fromIdTokenResponse(e,t,n=!1){const i=new wa;i.updateFromServerResponse(t);const r=new Ca({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await ya(r),r}}class Ia{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ia.type="NONE";const Ta=Ia;function ka(e,t,n){return`firebase:${e}:${t}:${n}`}class Ea{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ka(this.userKey,i.apiKey,r),this.fullPersistenceKey=ka("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ca._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ea(Qo(Ta),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||Qo(Ta);const s=ka(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const i=Ca._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new Ea(r,e,n)):new Ea(r,e,n)}}function Sa(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xa(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Pa(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Aa(t))return"Blackberry";if(Da(t))return"Webos";if(Na(t))return"Safari";if((t.includes("chrome/")||Ra(t))&&!t.includes("edge/"))return"Chrome";if(Oa(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Pa(e=$e()){return/firefox\//i.test(e)}function Na(e=$e()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ra(e=$e()){return/crios\//i.test(e)}function xa(e=$e()){return/iemobile/i.test(e)}function Oa(e=$e()){return/android/i.test(e)}function Aa(e=$e()){return/blackberry/i.test(e)}function Da(e=$e()){return/webos/i.test(e)}function Ma(e=$e()){return/iphone|ipad|ipod/i.test(e)}function La(e=$e()){return Ma(e)||Oa(e)||Da(e)||Aa(e)||/windows phone/i.test(e)||xa(e)}function $a(e,t=[]){let n;switch(e){case"Browser":n=Sa($e());break;case"Worker":n=`${Sa($e())}-${e}`;break;default:n=e}return`${n}/JsCore/9.6.2/${t.length?t.join(","):"FirebaseCore-web"}`}class Fa{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ua(this),this.idTokenSubscription=new Ua(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qo,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qo(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ea.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);i&&i!==r||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(Go(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ya(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ot(e):null;return t&&Go(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&Go(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Qo(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qe("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qo(e)||this._popupRedirectResolver;Go(t,this,"argument-error"),this.redirectPersistenceManager=await Ea.create(this,[Qo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Go(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Go(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$a(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function ja(e){return ot(e)}class Ua{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new nt(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Go(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class qa{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ko("not implemented")}_getIdTokenResponse(e){return Ko("not implemented")}_linkToIdToken(e,t){return Ko("not implemented")}_getReauthenticationResolver(e){return Ko("not implemented")}}class Wa extends qa{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Wa(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Wa(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return la(e,"POST","/v1/accounts:signInWithPassword",oa(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return la(e,"POST","/v1/accounts:signInWithEmailLink",oa(e,t))}(e,{email:this._email,oobCode:this._password});default:Ho(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return aa(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return la(e,"POST","/v1/accounts:signInWithEmailLink",oa(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ho(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function za(e,t){return la(e,"POST","/v1/accounts:signInWithIdp",oa(e,t))}class Ha extends qa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ho("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=jo(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Ha(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return za(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,za(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,za(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xe(t)}return e}}const Va={USER_NOT_FOUND:"user-not-found"};class Ba extends qa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ba({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ba({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return la(e,"POST","/v1/accounts:signInWithPhoneNumber",oa(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await la(e,"POST","/v1/accounts:signInWithPhoneNumber",oa(e,t));if(n.temporaryProof)throw da(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return la(e,"POST","/v1/accounts:signInWithPhoneNumber",oa(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Va)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Ba({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Ga{constructor(e){var t,n,i,r,s,o;const a=Ze(et(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Go(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Ze(et(e)).link,n=t?Ze(et(t)).deep_link_id:null,i=Ze(et(e)).deep_link_id;return(i?Ze(et(i)).link:null)||i||n||t||e}(e);try{return new Ga(t)}catch(e){return null}}}class Ka{constructor(){this.providerId=Ka.PROVIDER_ID}static credential(e,t){return Wa._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ga.parseLink(t);return Go(n,"argument-error"),Wa._fromEmailAndCode(e,n.code,n.tenantId)}}Ka.PROVIDER_ID="password",Ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ya{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ja extends Ya{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qa extends Ja{constructor(){super("facebook.com")}static credential(e){return Ha._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Qa.credential(e.oauthAccessToken)}catch(e){return null}}}Qa.FACEBOOK_SIGN_IN_METHOD="facebook.com",Qa.PROVIDER_ID="facebook.com";class Xa extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ha._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Xa.credential(t,n)}catch(e){return null}}}Xa.GOOGLE_SIGN_IN_METHOD="google.com",Xa.PROVIDER_ID="google.com";class Za extends Ja{constructor(){super("github.com")}static credential(e){return Ha._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Za.credential(e.oauthAccessToken)}catch(e){return null}}}Za.GITHUB_SIGN_IN_METHOD="github.com",Za.PROVIDER_ID="github.com";class ec extends Ja{constructor(){super("twitter.com")}static credential(e,t){return Ha._fromParams({providerId:ec.PROVIDER_ID,signInMethod:ec.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ec.credentialFromTaggedObject(e)}static credentialFromError(e){return ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ec.credential(t,n)}catch(e){return null}}}ec.TWITTER_SIGN_IN_METHOD="twitter.com",ec.PROVIDER_ID="twitter.com";class tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await Ca._fromIdTokenResponse(e,n,i),s=nc(n);return new tc({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=nc(n);return new tc({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function nc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ic extends Ue{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ic.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new ic(e,t,n,i)}}function rc(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw ic._fromErrorAndOperation(e,n,t,i);throw n}))}async function sc(e,t,n=!1){const i="signIn",r=await rc(e,i,t),s=await tc._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const oc="__sak";class ac{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class cc extends ac{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=$e();return Na(e)||Ma(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=La(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);!function(){const e=$e();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||r===e.newValue||e.newValue===e.oldValue?i():setTimeout(i,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cc.type="LOCAL";const lc=cc;class uc extends ac{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uc.type="SESSION";const hc=uc;class dc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new dc(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function pc(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}dc.receivers=[];class fc{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=pc("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function _c(){return window}function gc(){return void 0!==_c().WorkerGlobalScope&&"function"==typeof _c().importScripts}const mc="firebaseLocalStorageDb",vc="firebaseLocalStorage",yc="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function bc(e,t){return e.transaction([vc],t?"readwrite":"readonly").objectStore(vc)}function Cc(){const e=indexedDB.open(mc,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(vc,{keyPath:yc})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(vc)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(mc);return new wc(e).toPromise()}(),t(await Cc()))}))}))}async function Ic(e,t,n){const i=bc(e,!0).put({[yc]:t,value:n});return new wc(i).toPromise()}function Tc(e,t){const n=bc(e,!0).delete(t);return new wc(n).toPromise()}class kc{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Cc()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dc._getInstance(gc()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new fc(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cc();return await Ic(e,oc,"1"),await Tc(e,oc),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ic(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=bc(e,!1).get(t),i=await new wc(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Tc(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=bc(e,!1).getAll();return new wc(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}kc.type="LOCAL";const Ec=kc;function Sc(e){return`__${e}${Math.floor(1e6*Math.random())}`}Sc("rcb"),new ta(3e4,6e4);class Pc{constructor(e){this.providerId=Pc.PROVIDER_ID,this.auth=ja(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const r=await n.verify();try{let s;if(Go("string"==typeof r,e,"argument-error"),Go("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Go("enroll"===t.type,e,"internal-error");const n=await function(e,t){return aa(e,"POST","/v2/accounts/mfaEnrollment:start",oa(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Go("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Go(n,e,"missing-multi-factor-info");const o=await function(e,t){return aa(e,"POST","/v2/accounts/mfaSignIn:start",oa(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return aa(e,"POST","/v1/accounts:sendVerificationCode",oa(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}(this.auth,e,ot(t))}static credential(e,t){return Ba._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Pc.credentialFromTaggedObject(t)}static credentialFromError(e){return Pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ba._fromTokenResponse(t,n):null}}Pc.PROVIDER_ID="phone",Pc.PHONE_SIGN_IN_METHOD="phone";class Nc extends qa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return za(e,this._buildIdpRequest())}_linkToIdToken(e,t){return za(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return za(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rc(e){return sc(e.auth,new Nc(e),e.bypassAuthState)}function xc(e){const{auth:t,user:n}=e;return Go(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await ga(e,rc(i,r,t,e),n);Go(s.idToken,i,"internal-error");const o=_a(s.idToken);Go(o,i,"internal-error");const{sub:a}=o;return Go(e.uid===a,i,"user-mismatch"),tc._forOperation(e,r,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Ho(i,"user-mismatch"),e}}(n,new Nc(e),e.bypassAuthState)}async function Oc(e){const{auth:t,user:n}=e;return Go(n,t,"internal-error"),async function(e,t,n=!1){const i=await ga(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tc._forOperation(e,"link",i)}(n,new Nc(e),e.bypassAuthState)}class Ac{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rc;case"linkViaPopup":case"linkViaRedirect":return Oc;case"reauthViaPopup":case"reauthViaRedirect":return xc;default:Ho(this.auth,"internal-error")}}resolve(e){Yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dc=new ta(2e3,1e4);class Mc extends Ac{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Mc.currentPopupAction&&Mc.currentPopupAction.cancel(),Mc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Go(e,this.auth,"internal-error"),e}async onExecution(){Yo(1===this.filter.length,"Popup operations only handle one event");const e=pc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Vo(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Vo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Vo(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,Dc.get())};e()}}Mc.currentPopupAction=null;const Lc=new Map;class $c extends Ac{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Lc.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return ka("pendingRedirect",e.config.apiKey,e.name)}(t),i=function(e){return Qo(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Lc.set(this.auth._key(),e)}return this.bypassAuthState||Lc.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Fc(e,t,n=!1){const i=ja(e),r=function(e,t){return t?Qo(t):(Go(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),s=new $c(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class jc{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!qc(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Vo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uc(e))}saveEventToCache(e){this.cachedEventUids.add(Uc(e)),this.lastProcessedEventTime=Date.now()}}function Uc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function qc({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const Wc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zc=/^https?/;function Hc(e){const t=Xo(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!zc.test(n))return!1;if(Wc.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Vc=new ta(3e4,6e4);function Bc(){const e=_c().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Gc=null;function Kc(e){return Gc=Gc||function(e){return new Promise(((t,n)=>{var i,r,s,o;function a(){Bc(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Bc(),n(Vo(e,"network-request-failed"))},timeout:Vc.get()})}if(null===(r=null===(i=_c().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=_c().gapi)||void 0===s?void 0:s.load)){const t=Sc("iframefcb");return _c()[t]=()=>{gapi.load?a():n(Vo(e,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise(((e,t)=>{const n=document.createElement("script");var i,r;n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=Vo("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",(null!==(r=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==r?r:document).appendChild(n)}))).catch((e=>n(e)))}a()}})).catch((e=>{throw Gc=null,e}))}(e),Gc}const Yc=new ta(5e3,15e3),Jc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xc(e){const t=e.config;Go(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?na(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:Rt},r=Qc.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Xe(i).slice(1)}`}const Zc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class el{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function tl(e,t,n,i,r,s){Go(e.config.authDomain,e,"auth-domain-config-required"),Go(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Rt,eventId:r};if(t instanceof Ya){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Ke(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Ja){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?na(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${Xe(a).slice(1)}`}const nl="webStorageSupport",il=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hc,this._completeRedirectFn=Fc}async _openPopup(e,t,n,i){var r;return Yo(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Zc),{width:i.toString(),height:r.toString(),top:s,left:o}),l=$e().toLowerCase();n&&(a=Ra(l)?"_blank":n),Pa(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=$e()){var t;return Ma(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new el(null);const h=window.open(t||"",a,u);Go(h,e,"popup-blocked");try{h.focus()}catch(e){}return new el(h)}(e,tl(e,t,n,Xo(),i),pc())}async _openRedirect(e,t,n,i){var r;return await this._originValidation(e),r=tl(e,t,n,Xo(),i),_c().location.href=r,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Yo(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Kc(e),n=_c().gapi;return Go(n,e,"internal-error"),t.open({where:document.body,url:Xc(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jc,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Vo(e,"network-request-failed"),s=_c().setTimeout((()=>{i(r)}),Yc.get());function o(){_c().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}(e),n=new jc(e);return t.register("authEvent",(t=>(Go(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(nl,{type:nl},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&t(!!r),Ho(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return aa(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Hc(e))return}catch(e){}Ho(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return La()||Na()||Ma()}};var rl,sl="@firebase/auth",ol="0.19.5";class al{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Go(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}rl="Browser",Et(new at("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:i,authDomain:r}=n.options;return(e=>{Go(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),Go(!(null==r?void 0:r.includes(":")),"argument-error",{appName:e.name});const n={apiKey:i,authDomain:r,clientPlatform:rl,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$a(rl)},s=new Fa(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Qo);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Et(new at("auth-internal",(e=>(e=>new al(e))(ja(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ot(sl,ol,void 0),Ot(sl,ol,"esm2017");const cl=function(e=xt(),t){return St(e,"database").getImmediate({identifier:t})}(function(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw Pt.create("bad-app-name",{appName:String(i)});const r=It.get(i);if(r){if(Je(e,r.options)&&Je(n,r.config))return r;throw Pt.create("duplicate-app",{appName:i})}const s=new ut(i);for(const e of Tt.values())s.addComponent(e);const o=new Nt(e,n,s);return It.set(i,o),o}({apiKey:"AIzaSyCy_FUKz_BXYWOLHYovmtYgLJGNoxdLRhc",authDomain:"portfolio-site-b131f.firebaseapp.com",databaseURL:"https://portfolio-site-b131f-default-rtdb.firebaseio.com",projectId:"portfolio-site-b131f",storageBucket:"portfolio-site-b131f.appspot.com",messagingSenderId:"183070872810",appId:"1:183070872810:web:fd591f0eb3ebc47cbb7393"})),ll=function(e=xt()){const t=St(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=St(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Je(n.getOptions(),null!=t?t:{}))return e;Ho(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:il,persistence:[Ec,lc,hc]})}(),ul=new Promise(((e,t)=>{Mo(No(cl,"bio"),(t=>{const n=t.val();e(n)}))})),hl=new Promise(((e,t)=>{Mo(No(cl,"projects"),(t=>{const n=t.val();e(n)}))})),dl=new Promise(((e,t)=>{Mo(No(cl,"skills"),(t=>{const n=t.val();e(n)}))})),pl=Pe(!1);function fl(){null!==ll.currentUser?pl.set(!0):pl.set(!1)}const _l=Pe(!1);function gl(){_l.update((e=>!e))}const ml=Pe(!1);function vl(){ml.update((e=>!e))}const yl=Pe(!1);function wl(){yl.update((e=>!e))}const bl=Pe(null);const Cl=Se(null,(async e=>{const t=await(async()=>{let e;return e=[...await hl],e})();return e(t),()=>{}})),Il=Se(null,(e=>((async()=>{let e;return e=[...await dl],e})().then((t=>e(t))),stop=()=>{})));async function Tl(e,t){try{const n=await function(e,t,n){return async function(e,t){return sc(ja(e),t)}(ot(e),Ka.credential(t,n))}(ll,e,t);return n.user}catch(e){console.error(e)}}function kl(t){let n,i,r,o,a,c;return{c(){n=N("div"),i=N("form"),i.innerHTML='<div class="svelte-z27gl7"><label for="email" class="svelte-z27gl7">Email:</label> \n      <input type="email" name="email" id="email" class="svelte-z27gl7"/></div> \n    <div class="svelte-z27gl7"><label for="password" class="svelte-z27gl7">Password:</label> \n      <input type="password" name="password" id="password" class="svelte-z27gl7"/></div> \n    <button type="submit" class="svelte-z27gl7">Sign In</button>',M(i,"class","svelte-z27gl7"),M(n,"class","modal"),M(n,"id","form-container")},m(e,r){E(e,n,r),T(n,i),o=!0,a||(c=[D(i,"submit",t[0]),D(n,"click",t[1])],a=!0)},p:e,i(e){o||(ie((()=>{r||(r=me(n,ke,{},!0)),r.run(1)})),o=!0)},o(e){r||(r=me(n,ke,{},!1)),r.run(0),o=!1},d(e){e&&S(n),e&&r&&r.end(),a=!1,s(c)}}}function El(e){return[async function(e){e.preventDefault();const t=e.target.email.value,n=e.target.password.value;await Tl(t,n)&&(fl(),gl())},function(e){"form-container"===e.target.id&&gl()}]}const Sl=class extends Te{constructor(e){super(),Ie(this,e,El,kl,a,{})}};function Pl(t){let n,i,r;return{c(){n=N("div"),n.innerHTML='<object data="images/Resume.pdf" type="application/pdf" title="my resume" class="svelte-9lstyn"></object>',M(n,"class","modal"),M(n,"id","resume-container")},m(e,s){E(e,n,s),i||(r=D(n,"click",t[0]),i=!0)},p:e,i:e,o:e,d(e){e&&S(n),i=!1,r()}}}function Nl(e){return[function(e){"resume-container"===e.target.id&&wl()}]}const Rl=class extends Te{constructor(e){super(),Ie(this,e,Nl,Pl,a,{})}};function xl(e){let t,n;return t=new Sl({}),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Ol(e){let t,n;return t=new Rl({}),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Al(e){let t,n,i,r,s,o,a;function c(e,t){return e[3]?Dl:Ml}let l=c(e),u=l(e);return{c(){t=N("div"),u.c(),n=O(),i=N("div"),i.textContent="My resume",M(i,"class","menu-item svelte-s3ezn5"),M(t,"id","popper"),M(t,"class","svelte-s3ezn5")},m(r,c){E(r,t,c),u.m(t,null),T(t,n),T(t,i),s=!0,o||(a=D(i,"click",e[6]),o=!0)},p(e,i){l===(l=c(e))&&u?u.p(e,i):(u.d(1),u=l(e),u&&(u.c(),u.m(t,n)))},i(e){s||(ie((()=>{r||(r=me(t,ke,{duration:250,delay:0},!0)),r.run(1)})),s=!0)},o(e){r||(r=me(t,ke,{duration:250,delay:0},!1)),r.run(0),s=!1},d(e){e&&S(t),u.d(),e&&r&&r.end(),o=!1,a()}}}function Dl(t){let n,i,r;return{c(){n=N("div"),n.textContent="Sign Out",M(n,"class","menu-item svelte-s3ezn5")},m(e,s){E(e,n,s),i||(r=D(n,"click",t[5]),i=!0)},p:e,d(e){e&&S(n),i=!1,r()}}}function Ml(t){let n,i,r;return{c(){n=N("div"),n.textContent="Login",M(n,"class","menu-item svelte-s3ezn5")},m(e,s){E(e,n,s),i||(r=D(n,"click",t[4]),i=!0)},p:e,d(e){e&&S(n),i=!1,r()}}}function Ll(e){let t,n,i,r,s,o,a,c,u,h,d,p=e[0]&&xl(),f=e[1]&&Ol(),_=e[2]&&Al(e);return{c(){t=N("header"),p&&p.c(),n=O(),f&&f.c(),i=O(),r=N("img"),o=O(),_&&_.c(),a=O(),c=N("h1"),c.textContent="Alex Wiegand",l(r.src,s="./images/profile.jpg")||M(r,"src","./images/profile.jpg"),M(r,"alt",""),M(r,"class","svelte-s3ezn5"),M(c,"class","svelte-s3ezn5"),M(t,"class","svelte-s3ezn5")},m(e,s){E(e,t,s),p&&p.m(t,null),T(t,n),f&&f.m(t,null),T(t,i),T(t,r),T(t,o),_&&_.m(t,null),T(t,a),T(t,c),u=!0,h||(d=D(r,"click",vl),h=!0)},p(e,[r]){e[0]?p?1&r&&fe(p,1):(p=xl(),p.c(),fe(p,1),p.m(t,n)):p&&(de(),_e(p,1,1,(()=>{p=null})),pe()),e[1]?f?2&r&&fe(f,1):(f=Ol(),f.c(),fe(f,1),f.m(t,i)):f&&(de(),_e(f,1,1,(()=>{f=null})),pe()),e[2]?_?(_.p(e,r),4&r&&fe(_,1)):(_=Al(e),_.c(),fe(_,1),_.m(t,a)):_&&(de(),_e(_,1,1,(()=>{_=null})),pe())},i(e){u||(fe(p),fe(f),fe(_),u=!0)},o(e){_e(p),_e(f),_e(_),u=!1},d(e){e&&S(t),p&&p.d(),f&&f.d(),_&&_.d(),h=!1,d()}}}function $l(e,t,n){let i,r,s,o;return h(e,_l,(e=>n(0,i=e))),h(e,yl,(e=>n(1,r=e))),h(e,ml,(e=>n(2,s=e))),h(e,pl,(e=>n(3,o=e))),[i,r,s,o,()=>{gl(),vl()},()=>async function(){await function(e){return ot(e).signOut()}(ll),fl()}(),()=>{wl(),vl()}]}const Fl=class extends Te{constructor(e){super(),Ie(this,e,$l,Ll,a,{})}};function jl(t){let n;return{c(){n=N("section"),n.innerHTML='<h2>Contact Me</h2> \n  <address class="svelte-1trzw5"><a href="mailto:wiegand.alex@gmail.com"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/google/google-original.svg" alt="email for Alex Wiegand" class="svelte-1trzw5"/></a> \n    <a href="https://www.linkedin.com/in/alex-wiegand-10691022"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/linkedin/linkedin-original.svg" alt="linkedin for Alex Wiegand" class="svelte-1trzw5"/></a> \n    <a href="https://github.com/Wiegand92"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original-wordmark.svg" alt="github for alex wiegand" class="svelte-1trzw5"/></a></address>'},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}const Ul=class extends Te{constructor(e){super(),Ie(this,e,null,jl,a,{})}};function ql(t){let n,i,r;return{c(){n=N("div"),M(n,"class","sc-carousel-dot__dot svelte-ib7r5j"),F(n,"sc-carousel-dot__dot_active",t[0])},m(e,s){E(e,n,s),i||(r=D(n,"click",t[1]),i=!0)},p(e,[t]){1&t&&F(n,"sc-carousel-dot__dot_active",e[0])},i:e,o:e,d(e){e&&S(n),i=!1,r()}}}function Wl(e,t,n){let{active:i=!1}=t;return e.$$set=e=>{"active"in e&&n(0,i=e.active)},[i,function(t){K.call(this,e,t)}]}const zl=class extends Te{constructor(e){super(),Ie(this,e,Wl,ql,a,{active:0})}};function Hl(e,t,n){const i=e.slice();return i[5]=t[n],i[7]=n,i}function Vl(e,t){let n,i,r,s;return i=new zl({props:{active:t[1]===t[7]}}),i.$on("click",(function(){return t[3](t[7])})),{key:e,first:null,c(){n=N("div"),we(i.$$.fragment),r=O(),M(n,"class","sc-carousel-dots__dot-container svelte-670fde"),this.first=n},m(e,t){E(e,n,t),be(i,n,null),T(n,r),s=!0},p(e,n){t=e;const r={};3&n&&(r.active=t[1]===t[7]),i.$set(r)},i(e){s||(fe(i.$$.fragment,e),s=!0)},o(e){_e(i.$$.fragment,e),s=!1},d(e){e&&S(n),Ce(i)}}}function Bl(e){let t,n,i=[],r=new Map,s=Array(e[0]);const o=e=>e[7];for(let t=0;t<s.length;t+=1){let n=Hl(e,s,t),a=o(n);r.set(a,i[t]=Vl(a,n))}return{c(){t=N("div");for(let e=0;e<i.length;e+=1)i[e].c();M(t,"class","sc-carousel-dots__container svelte-670fde")},m(e,r){E(e,t,r);for(let e=0;e<i.length;e+=1)i[e].m(t,null);n=!0},p(e,[n]){7&n&&(s=Array(e[0]),de(),i=function(e,t,n,i,r,s,o,a,c,l,u,h){let d=e.length,p=s.length,f=d;const _={};for(;f--;)_[e[f].key]=f;const g=[],m=new Map,v=new Map;for(f=p;f--;){const e=h(r,s,f),i=n(e);let a=o.get(i);a?a.p(e,t):(a=l(i,e),a.c()),m.set(i,g[f]=a),i in _&&v.set(i,Math.abs(f-_[i]))}const y=new Set,w=new Set;function b(e){fe(e,1),e.m(a,u),o.set(e.key,e),u=e.first,p--}for(;d&&p;){const t=g[p-1],n=e[d-1],i=t.key,r=n.key;t===n?(u=t.first,d--,p--):m.has(r)?!o.has(i)||y.has(i)?b(t):w.has(r)?d--:v.get(i)>v.get(r)?(w.add(i),b(t)):(y.add(r),d--):(c(n,o),d--)}for(;d--;){const t=e[d];m.has(t.key)||c(t,o)}for(;p;)b(g[p-1]);return g}(i,n,o,0,e,s,r,t,ve,Vl,null,Hl),pe())},i(e){if(!n){for(let e=0;e<s.length;e+=1)fe(i[e]);n=!0}},o(e){for(let e=0;e<i.length;e+=1)_e(i[e]);n=!1},d(e){e&&S(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function Gl(e,t,n){const i=G();let{pagesCount:r=1}=t,{currentPageIndex:s=0}=t;function o(e){i("pageChange",e)}return e.$$set=e=>{"pagesCount"in e&&n(0,r=e.pagesCount),"currentPageIndex"in e&&n(1,s=e.currentPageIndex)},[r,s,o,e=>o(e)]}const Kl=class extends Te{constructor(e){super(),Ie(this,e,Gl,Bl,a,{pagesCount:0,currentPageIndex:1})}},Yl="prev",Jl="next";function Ql(t){let n,i,r,s;return{c(){n=N("div"),i=N("i"),M(i,"class","sc-carousel-arrow__arrow svelte-1bftafx"),F(i,"sc-carousel-arrow__arrow-next",t[0]===Jl),F(i,"sc-carousel-arrow__arrow-prev",t[0]===Yl),M(n,"class","sc-carousel-arrow__circle svelte-1bftafx"),F(n,"sc-carousel-arrow__circle_disabled",t[1])},m(e,o){E(e,n,o),T(n,i),r||(s=D(n,"click",t[2]),r=!0)},p(e,[t]){1&t&&F(i,"sc-carousel-arrow__arrow-next",e[0]===Jl),1&t&&F(i,"sc-carousel-arrow__arrow-prev",e[0]===Yl),2&t&&F(n,"sc-carousel-arrow__circle_disabled",e[1])},i:e,o:e,d(e){e&&S(n),r=!1,s()}}}function Xl(e,t,n){let{direction:i=Jl}=t,{disabled:r=!1}=t;return e.$$set=e=>{"direction"in e&&n(0,i=e.direction),"disabled"in e&&n(1,r=e.disabled)},[i,r,function(t){K.call(this,e,t)}]}const Zl=class extends Te{constructor(e){super(),Ie(this,e,Xl,Ql,a,{direction:0,disabled:1})}};function eu(t){let n;return{c(){n=N("div"),M(n,"class","sc-carousel-progress__indicator svelte-i7yfid"),$(n,"width",t[0]+"%")},m(e,t){E(e,n,t)},p(e,[t]){1&t&&$(n,"width",e[0]+"%")},i:e,o:e,d(e){e&&S(n)}}}function tu(e,t,n){let i,{value:r=0}=t;return e.$$set=e=>{"value"in e&&n(1,r=e.value)},e.$$.update=()=>{2&e.$$.dirty&&n(0,i=Math.min(Math.max(100*r,0),100))},[i,r]}const nu=class extends Te{constructor(e){super(),Ie(this,e,tu,eu,a,{value:1})}};function iu(e,t){e.removeEventListener("mouseup",t),e.removeEventListener("touchend",t)}function ru(e,t){e.removeEventListener("mousemove",t),e.removeEventListener("touchmove",t)}function su(e){return function(t,n){e.dispatchEvent(new CustomEvent(t,{detail:n}))}}function ou(e){if("TouchEvent"in window&&e instanceof TouchEvent){const t=e.touches[0];return{x:t?t.clientX:0,y:t?t.clientY:0}}return{x:e.clientX,y:e.clientY}}function au(e,{thresholdProvider:t}){const n=su(e);let i,r,s,o=0,a=!1;function c(e){s=Date.now(),o=0,a=!0;const t=ou(e);var c,h;i=t.x,r=t.y,n("swipeStart",{x:i,y:r}),h=l,(c=window).addEventListener("mousemove",h),c.addEventListener("touchmove",h),function(e,t){e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}(window,u)}function l(e){if(!a)return;const s=ou(e),c=s.x-i,h=s.y-r;i=s.x,r=s.y,n("swipeMove",{x:i,y:r,dx:c,dy:h}),0!==c&&Math.sign(c)!==Math.sign(o)&&(o=0),o+=c,Math.abs(o)>t()&&(n("swipeThresholdReached",{direction:o>0?Yl:Jl}),iu(window,u),ru(window,l))}function u(e){if(e.preventDefault(),iu(window,u),ru(window,l),a=!1,!(Date.now()-s>=111&&Math.abs(o)>=20))return void n("swipeFailed");const t=ou(e);n("swipeEnd",{x:t.x,y:t.y})}var h,d;return d=c,(h=e).addEventListener("mousedown",d),h.addEventListener("touchstart",d,{passive:!0}),{destroy(){!function(e,t){e.removeEventListener("mousedown",t),e.removeEventListener("touchstart",t)}(e,c)}}}function cu(e,t){e.removeEventListener("mouseleave",t)}function lu(e){const t=su(e);function n(){var n;n=i,e.addEventListener("mouseleave",n),t("hovered",{value:!0})}function i(){t("hovered",{value:!1}),cu(e,i)}var r;return r=n,e.addEventListener("mouseenter",r),{destroy(){!function(e,t){e.removeEventListener("mouseenter",t)}(e,n),cu(e,i)}}}function uu(e,t,n){return Math.max(e,Math.min(t,n))}function hu(e,t){e.removeEventListener("touchend",t)}function du(e){const t=su(e);let n=0,i={x:0,y:0};function r(t){n=Date.now();const r=t.touches[0];var o;i={x:r.clientX,y:r.clientY},o=s,e.addEventListener("touchend",o)}function s(r){r.preventDefault(),hu(e,s);const o=r.changedTouches[0];(function({tapEndedAt:e,tapEndedPos:t}){const r=e-n,s=((e,t)=>{const n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)})(i,t);return r<=110&&s<=9})({tapEndedAt:Date.now(),tapEndedPos:{x:o.clientX,y:o.clientY}})&&t("tapped")}var o;return o=r,e.addEventListener("touchstart",o,{passive:!0}),{destroy(){!function(e,t){e.removeEventListener("touchstart",t)}(e,r),hu(e,s)}}}function pu({particlesCountWithoutClones:e,particlesToScroll:t}){return Math.ceil(e/t)}function fu({infinite:e,pageIndex:t,clonesCountHead:n,clonesCountTail:i,particlesToScroll:r,particlesCount:s,particlesToShow:o}){return e?function({pageIndex:e,clonesCountHead:t,clonesCountTail:n,particlesToScroll:i,particlesCount:r}){return uu(0,Math.min(t+e*i,r-n),r-1)}({pageIndex:t,clonesCountHead:n,clonesCountTail:i,particlesToScroll:r,particlesCount:s}):function({pageIndex:e,particlesToScroll:t,particlesCount:n,particlesToShow:i}){return uu(0,Math.min(e*t,n-i),n-1)}({pageIndex:t,particlesToScroll:r,particlesCount:s,particlesToShow:o})}function _u({particlesToScroll:e,particlesToShow:t,particlesCountWithoutClones:n}){const i=e-t;let r=t;for(;;){const e=n-r-i;if(e<t)return Math.max(e,0);r+=t+i}}const gu=(e,t,n)=>{if(e&&e.hasOwnProperty(t))return e[t];if(void 0===n)throw new Error(`Required arg "${t}" was not provided`);return n},mu=e=>t=>{e[t]&&e[t]()};var vu=n(208),yu=n.n(vu),wu=n(465),bu=n.n(wu),Cu=n(307),Iu=n.n(Cu);function Tu(e,t){const n=yu()(e,"data",{}),i=yu()(e,"watch",{}),r=yu()(e,"methods",{}),s=yu()(t,"onChange",(()=>{})),{subscribe:o,notify:a,subscribers:c}=(()=>{const e={};return{subscribers:e,subscribe(t,n){t&&((t,n)=>{const{watcherName:i,fn:r}=t,{prop:s,value:o}=n;e[i]||(e[i]={deps:{},fn:r}),e[i].deps[s]=o})(t,n)},notify(t,n){Object.entries(e).forEach((([i,{deps:r,fn:s}])=>{const o=(e=>Object.keys(e||{}))(r);if(o.includes(n)){const n=((e,t)=>{const n={};return e.forEach((e=>{n[e]=t[e]})),n})(o,t);a=r,c=n,Iu()(a,c)||(e[i].deps=n,s())}var a,c}))}}})(),{targetWatcher:l,getTarget:u}=(()=>{let e=null;return{targetWatcher(t,n){e={watcherName:t,fn:n},e.fn(),e=null},getTarget:()=>e}})();let h;const d={},p=()=>({data:h,methods:d});let f=!1;Object.entries(r).forEach((([e,t])=>{var n;d[e]=(n=(...e)=>t(p(),...e),(...e)=>{f=!0;const t=n(...e);return f=!1,t}),Object.defineProperty(d[e],"name",{value:e})})),h=new Proxy(bu()(n),{get(e,t){return u()&&!f&&o(u(),{prop:t,value:e[t]}),Reflect.get(...arguments)},set(e,t,n){return e[t]===n||(Reflect.set(...arguments),u()||(s&&s(t,n),a(h,t))),!0}}),Object.entries(i).forEach((([e,t])=>{l(e,(()=>{t(p())}))}));const _=[h,d];return _._internal={_getSubscribers:()=>c},_}class ku{constructor({onProgressValueChange:e}){this._onProgressValueChange=e,this._autoplayDuration,this._onProgressValueChange,this._interval,this._paused=!1}setAutoplayDuration(e){this._autoplayDuration=e}start(e){return new Promise((t=>{this.reset();const n=Math.min(35,this._autoplayDuration);let i=-n;var r,s;this._interval=(s=n,(r=async()=>{if(this._paused)return;i+=n;const r=i/this._autoplayDuration;this._onProgressValueChange(r),r>1&&(this.reset(),await e(),t())})(),setInterval(r,s))}))}pause(){this._paused=!0}resume(){this._paused=!1}reset(){clearInterval(this._interval),this._onProgressValueChange(1)}}const Eu=function(e){const t=new ku({onProgressValueChange:t=>{e("progressValue",1-t)}}),n=Tu({data:{particlesCountWithoutClones:0,particlesToShow:1,particlesToShowInit:1,particlesToScroll:1,particlesToScrollInit:1,particlesCount:1,currentParticleIndex:1,infinite:!1,autoplayDuration:1e3,clonesCountHead:0,clonesCountTail:0,clonesCountTotal:0,partialPageSize:1,currentPageIndex:1,pagesCount:1,pauseOnFocus:!1,focused:!1,autoplay:!1,autoplayDirection:"next",disabled:!1,durationMsInit:1e3,durationMs:1e3,offset:0,particleWidth:0,loaded:[]},watch:{setLoaded({data:e}){e.loaded=function({infinite:e,pageIndex:t,pagesCount:n,particlesCount:i,particlesToShow:r,particlesToScroll:s}){const o=uu(0,t,n-1);let a=o-1,c=o+1;a=e?a<0?n-1:a:Math.max(0,a),c=e?c>n-1?0:c:Math.min(n-1,c);const l=[...new Set([a,o,c,0,n-1])].sort(((e,t)=>e-t)),u=l.flatMap((e=>function({pageIndex:e,particlesToShow:t,particlesToScroll:n,particlesCount:i}){const r=e*t-e*(0===e?0:t-n),s=r+Math.max(t,n)-1,o=[];for(let e=r;e<=Math.min(i-1,s);e++)o.push(e);return o}({pageIndex:e,particlesToShow:r,particlesToScroll:s,particlesCount:i})));return{pageIndexes:l,particleIndexes:[...new Set(u)].sort(((e,t)=>e-t))}}({infinite:e.infinite,pageIndex:e.currentPageIndex,pagesCount:e.pagesCount,particlesCount:e.particlesCountWithoutClones,particlesToShow:e.particlesToShow,particlesToScroll:e.particlesToScroll}).particleIndexes},setCurrentPageIndex({data:e}){e.currentPageIndex=function({currentParticleIndex:e,particlesCount:t,clonesCountHead:n,clonesCountTotal:i,infinite:r,particlesToScroll:s}){return r?function({currentParticleIndex:e,particlesCount:t,clonesCountHead:n,clonesCountTotal:i,particlesToScroll:r}){return e===t-n?0:0===e?pu({particlesCountWithoutClones:t-i,particlesToScroll:r})-1:Math.floor((e-n)/r)}({currentParticleIndex:e,particlesCount:t,clonesCountHead:n,clonesCountTotal:i,particlesToScroll:s}):function({currentParticleIndex:e,particlesToScroll:t}){return Math.ceil(e/t)}({currentParticleIndex:e,particlesToScroll:s})}({currentParticleIndex:e.currentParticleIndex,particlesCount:e.particlesCount,clonesCountHead:e.clonesCountHead,clonesCountTotal:e.clonesCountTotal,infinite:e.infinite,particlesToScroll:e.particlesToScroll})},setPartialPageSize({data:e}){e.partialPageSize=_u({particlesToScroll:e.particlesToScroll,particlesToShow:e.particlesToShow,particlesCountWithoutClones:e.particlesCountWithoutClones})},setClonesCount({data:e}){const{head:t,tail:n}=function({infinite:e,particlesToShow:t,partialPageSize:n}){const i=e?{head:Math.ceil(n||t),tail:Math.ceil(t)}:{head:0,tail:0};return{...i,total:i.head+i.tail}}({infinite:e.infinite,particlesToShow:e.particlesToShow,partialPageSize:e.partialPageSize});e.clonesCountHead=t,e.clonesCountTail=n,e.clonesCountTotal=t+n},setProgressManagerAutoplayDuration({data:e}){t.setAutoplayDuration(e.autoplayDuration)},toggleProgressManager({data:{pauseOnFocus:e,focused:n}}){e&&(n?t.pause():t.resume())},initDuration({data:e}){e.durationMs=e.durationMsInit},applyAutoplay({data:e,methods:{_applyAutoplayIfNeeded:t}}){e.autoplay&&t(e.autoplay)},setPagesCount({data:e}){e.pagesCount=function({infinite:e,particlesCountWithoutClones:t,particlesToScroll:n,particlesToShow:i}){return e?pu({particlesCountWithoutClones:t,particlesToScroll:n}):function({particlesCountWithoutClones:e,particlesToScroll:t,particlesToShow:n}){const i=_u({particlesCountWithoutClones:e,particlesToScroll:t,particlesToShow:n});return Math.ceil(e/t)-i}({particlesCountWithoutClones:t,particlesToScroll:n,particlesToShow:i})}({infinite:e.infinite,particlesCountWithoutClones:e.particlesCountWithoutClones,particlesToScroll:e.particlesToScroll,particlesToShow:e.particlesToShow})},setParticlesToShow({data:e}){e.particlesToShow=uu(1,e.particlesToShowInit,e.particlesCountWithoutClones)},setParticlesToScroll({data:e}){e.particlesToScroll=uu(1,e.particlesToScrollInit,e.particlesCountWithoutClones)}},methods:{_prev({data:e}){e.currentParticleIndex=fu({infinite:e.infinite,pageIndex:e.currentPageIndex-1,clonesCountHead:e.clonesCountHead,clonesCountTail:e.clonesCountTail,particlesToScroll:e.particlesToScroll,particlesCount:e.particlesCount,particlesToShow:e.particlesToShow})},_next({data:e}){e.currentParticleIndex=fu({infinite:e.infinite,pageIndex:e.currentPageIndex+1,clonesCountHead:e.clonesCountHead,clonesCountTail:e.clonesCountTail,particlesToScroll:e.particlesToScroll,particlesCount:e.particlesCount,particlesToShow:e.particlesToShow})},_moveToParticle({data:e},t){e.currentParticleIndex=uu(0,t,e.particlesCount-1)},toggleFocused({data:e}){e.focused=!e.focused},async _applyAutoplayIfNeeded({data:e,methods:n}){if(e.infinite||!(e.autoplayDirection===Jl&&e.currentParticleIndex===e.particlesCount-1||e.autoplayDirection===Yl&&0===e.currentParticleIndex)){if(e.autoplay){const i=()=>mu({[Jl]:async()=>n.showNextPage(),[Yl]:async()=>n.showPrevPage()})(e.autoplayDirection);await t.start(i)}}else t.reset()},async _jumpIfNeeded({data:e,methods:t}){let n=!1;return e.infinite&&(0===e.currentParticleIndex?(await t.showParticle(e.particlesCount-e.clonesCountTotal,{animated:!1}),n=!0):e.currentParticleIndex===e.particlesCount-e.clonesCountTail&&(await t.showParticle(e.clonesCountHead,{animated:!1}),n=!0)),n},async changePage({data:e,methods:n},i,r){t.reset(),e.disabled||(e.disabled=!0,i(),await n.offsetPage({animated:gu(r,"animated",!0)}),e.disabled=!1,!await n._jumpIfNeeded()&&n._applyAutoplayIfNeeded())},async showNextPage({data:e,methods:t},n){e.disabled||await t.changePage(t._next,n)},async showPrevPage({data:e,methods:t},n){e.disabled||await t.changePage(t._prev,n)},async showParticle({methods:e},t,n){await e.changePage((()=>e._moveToParticle(t)),n)},_getParticleIndexByPageIndex:({data:e},t)=>fu({infinite:e.infinite,pageIndex:t,clonesCountHead:e.clonesCountHead,clonesCountTail:e.clonesCountTail,particlesToScroll:e.particlesToScroll,particlesCount:e.particlesCount,particlesToShow:e.particlesToShow}),async showPage({methods:e},t,n){const i=e._getParticleIndexByPageIndex(t);await e.showParticle(i,n)},offsetPage({data:e},t){const n=gu(t,"animated",!0);return new Promise((t=>{e.durationMs=n?e.durationMsInit:0,e.offset=-e.currentParticleIndex*e.particleWidth,setTimeout((()=>{t()}),e.durationMs)}))}}},{onChange:e}),[i,r]=n;return[{data:i,progressManager:t},r,n._internal]},Su=e=>({currentPageIndex:64&e[0],pagesCount:1024&e[0],loaded:32&e[0]}),Pu=e=>({currentPageIndex:e[6],pagesCount:e[10],showPage:e[15],loaded:e[5]}),Nu=e=>({loaded:32&e[0]}),Ru=e=>({showNextPage:e[14].showNextPage,loaded:e[5]}),xu=e=>({loaded:32&e[0]}),Ou=e=>({loaded:e[5]}),Au=e=>({loaded:32&e[0]}),Du=e=>({showPrevPage:e[14].showPrevPage,loaded:e[5]});function Mu(e){let t;const n=e[37].prev,i=d(n,e,e[36],Du),r=i||function(e){let t,n,i;return n=new Zl({props:{direction:"prev",disabled:!e[2]&&0===e[6]}}),n.$on("click",e[23]),{c(){t=N("div"),we(n.$$.fragment),M(t,"class","sc-carousel__arrow-container svelte-1qditro")},m(e,r){E(e,t,r),be(n,t,null),i=!0},p(e,t){const i={};68&t[0]&&(i.disabled=!e[2]&&0===e[6]),n.$set(i)},i(e){i||(fe(n.$$.fragment,e),i=!0)},o(e){_e(n.$$.fragment,e),i=!1},d(e){e&&S(t),Ce(n)}}}(e);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,s){i?i.p&&(!t||32&s[0]|32&s[1])&&_(i,n,e,e[36],t?f(n,e[36],s,Au):g(e[36]),Du):r&&r.p&&(!t||68&s[0])&&r.p(e,t?s:[-1,-1])},i(e){t||(fe(r,e),t=!0)},o(e){_e(r,e),t=!1},d(e){r&&r.d(e)}}}function Lu(e){let t,n,i;return n=new nu({props:{value:e[7]}}),{c(){t=N("div"),we(n.$$.fragment),M(t,"class","sc-carousel-progress__container svelte-1qditro")},m(e,r){E(e,t,r),be(n,t,null),i=!0},p(e,t){const i={};128&t[0]&&(i.value=e[7]),n.$set(i)},i(e){i||(fe(n.$$.fragment,e),i=!0)},o(e){_e(n.$$.fragment,e),i=!1},d(e){e&&S(t),Ce(n)}}}function $u(e){let t;const n=e[37].next,i=d(n,e,e[36],Ru),r=i||function(e){let t,n,i;return n=new Zl({props:{direction:"next",disabled:!e[2]&&e[6]===e[10]-1}}),n.$on("click",e[14].showNextPage),{c(){t=N("div"),we(n.$$.fragment),M(t,"class","sc-carousel__arrow-container svelte-1qditro")},m(e,r){E(e,t,r),be(n,t,null),i=!0},p(e,t){const i={};1092&t[0]&&(i.disabled=!e[2]&&e[6]===e[10]-1),n.$set(i)},i(e){i||(fe(n.$$.fragment,e),i=!0)},o(e){_e(n.$$.fragment,e),i=!1},d(e){e&&S(t),Ce(n)}}}(e);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,s){i?i.p&&(!t||32&s[0]|32&s[1])&&_(i,n,e,e[36],t?f(n,e[36],s,Nu):g(e[36]),Ru):r&&r.p&&(!t||1092&s[0])&&r.p(e,t?s:[-1,-1])},i(e){t||(fe(r,e),t=!0)},o(e){_e(r,e),t=!1},d(e){r&&r.d(e)}}}function Fu(e){let t;const n=e[37].dots,i=d(n,e,e[36],Pu),r=i||function(e){let t,n;return t=new Kl({props:{pagesCount:e[10],currentPageIndex:e[6]}}),t.$on("pageChange",e[41]),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},p(e,n){const i={};1024&n[0]&&(i.pagesCount=e[10]),64&n[0]&&(i.currentPageIndex=e[6]),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}(e);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,s){i?i.p&&(!t||1120&s[0]|32&s[1])&&_(i,n,e,e[36],t?f(n,e[36],s,Su):g(e[36]),Pu):r&&r.p&&(!t||1088&s[0])&&r.p(e,t?s:[-1,-1])},i(e){t||(fe(r,e),t=!0)},o(e){_e(r,e),t=!1},d(e){r&&r.d(e)}}}function ju(e){let t,n,i,r,a,c,l,u,h,p,v,y,w,b,C=e[1]&&Mu(e);const I=e[37].default,k=d(I,e,e[36],Ou);let P=e[3]&&Lu(e),R=e[1]&&$u(e),x=e[4]&&Fu(e);return{c(){t=N("div"),n=N("div"),C&&C.c(),i=O(),r=N("div"),a=N("div"),k&&k.c(),l=O(),P&&P.c(),p=O(),R&&R.c(),v=O(),x&&x.c(),M(a,"class","sc-carousel__pages-container svelte-1qditro"),$(a,"transform","translateX("+e[8]+"px)"),$(a,"transition-duration",e[9]+"ms"),$(a,"transition-timing-function",e[0]),M(r,"class","sc-carousel__pages-window svelte-1qditro"),M(n,"class","sc-carousel__content-container svelte-1qditro"),M(t,"class","sc-carousel__carousel-container svelte-1qditro")},m(s,o){E(s,t,o),T(t,n),C&&C.m(n,null),T(n,i),T(n,r),T(r,a),k&&k.m(a,null),e[39](a),T(r,l),P&&P.m(r,null),e[40](r),T(n,p),R&&R.m(n,null),T(t,v),x&&x.m(t,null),y=!0,w||(b=[m(c=au.call(null,a,{thresholdProvider:e[38]})),D(a,"swipeStart",e[16]),D(a,"swipeMove",e[18]),D(a,"swipeEnd",e[19]),D(a,"swipeFailed",e[20]),D(a,"swipeThresholdReached",e[17]),m(u=lu.call(null,r)),D(r,"hovered",e[21]),m(h=du.call(null,r)),D(r,"tapped",e[22])],w=!0)},p(e,s){e[1]?C?(C.p(e,s),2&s[0]&&fe(C,1)):(C=Mu(e),C.c(),fe(C,1),C.m(n,i)):C&&(de(),_e(C,1,1,(()=>{C=null})),pe()),k&&k.p&&(!y||32&s[0]|32&s[1])&&_(k,I,e,e[36],y?f(I,e[36],s,xu):g(e[36]),Ou),(!y||256&s[0])&&$(a,"transform","translateX("+e[8]+"px)"),(!y||512&s[0])&&$(a,"transition-duration",e[9]+"ms"),(!y||1&s[0])&&$(a,"transition-timing-function",e[0]),c&&o(c.update)&&2048&s[0]&&c.update.call(null,{thresholdProvider:e[38]}),e[3]?P?(P.p(e,s),8&s[0]&&fe(P,1)):(P=Lu(e),P.c(),fe(P,1),P.m(r,null)):P&&(de(),_e(P,1,1,(()=>{P=null})),pe()),e[1]?R?(R.p(e,s),2&s[0]&&fe(R,1)):(R=$u(e),R.c(),fe(R,1),R.m(n,null)):R&&(de(),_e(R,1,1,(()=>{R=null})),pe()),e[4]?x?(x.p(e,s),16&s[0]&&fe(x,1)):(x=Fu(e),x.c(),fe(x,1),x.m(t,null)):x&&(de(),_e(x,1,1,(()=>{x=null})),pe())},i(e){y||(fe(C),fe(k,e),fe(P),fe(R),fe(x),y=!0)},o(e){_e(C),_e(k,e),_e(P),_e(R),_e(x),y=!1},d(n){n&&S(t),C&&C.d(),k&&k.d(n),e[39](null),P&&P.d(),e[40](null),R&&R.d(),x&&x.d(),w=!1,s(b)}}}function Uu(e,t,n){let i,r,{$$slots:s={},$$scope:o}=t,a=[],c=0,l=0,u=1;const[{data:h,progressManager:d},p,f]=Eu(((e,t)=>{mu({currentPageIndex:()=>n(6,i=t),progressValue:()=>n(7,r=t),offset:()=>n(8,c=t),durationMs:()=>n(9,l=t),pagesCount:()=>n(10,u=t),loaded:()=>n(5,a=t)})(e)}));G();let _,g,{timingFunction:m="ease-in-out"}=t,{arrows:v=!0}=t,{infinite:y=!0}=t,{initialPageIndex:w=0}=t,{duration:b=500}=t,{autoplay:C=!1}=t,{autoplayDuration:I=3e3}=t,{autoplayDirection:T=Jl}=t,{pauseOnFocus:k=!1}=t,{autoplayProgressVisible:E=!1}=t,{dots:S=!0}=t,{swiping:P=!0}=t,{particlesToShow:N=1}=t,{particlesToScroll:R=1}=t,x=0;const O=(A=({width:e})=>{n(11,x=e),h.particleWidth=x/h.particlesToShow,function({particlesContainerChildren:e,particleWidth:t}){for(let n=0;n<e.length;n++)e[n].style.minWidth=`${t}px`,e[n].style.maxWidth=`${t}px`}({particlesContainerChildren:g.children,particleWidth:h.particleWidth}),p.offsetPage({animated:!1})},new ResizeObserver((e=>{A({width:e[0].contentRect.width})})));var A,D;async function M(e){await p.showPage(e,{animated:!0})}return B((()=>{(async()=>{await ne(),g&&_&&(h.particlesCountWithoutClones=g.children.length,await ne(),h.infinite&&function(){const{clonesToAppend:e,clonesToPrepend:t}=function({clonesCountHead:e,clonesCountTail:t,particlesContainerChildren:n}){const i=[];for(let e=0;e<t;e++)i.push(n[e].cloneNode(!0));const r=[],s=n.length;for(let t=s-1;t>s-1-e;t--)r.push(n[t].cloneNode(!0));return{clonesToAppend:i,clonesToPrepend:r}}({clonesCountHead:h.clonesCountHead,clonesCountTail:h.clonesCountTail,particlesContainerChildren:g.children});!function({particlesContainer:e,clonesToAppend:t,clonesToPrepend:n}){for(let n=0;n<t.length;n++)e.append(t[n]);for(let t=0;t<n.length;t++)e.prepend(n[t])}({particlesContainer:g,clonesToAppend:e,clonesToPrepend:t})}(),h.particlesCount=g.children.length,p.showPage(w,{animated:!1}),O.observe(_))})()})),D=()=>{O.disconnect(),d.reset()},V().$$.on_destroy.push(D),e.$$set=e=>{"timingFunction"in e&&n(0,m=e.timingFunction),"arrows"in e&&n(1,v=e.arrows),"infinite"in e&&n(2,y=e.infinite),"initialPageIndex"in e&&n(24,w=e.initialPageIndex),"duration"in e&&n(25,b=e.duration),"autoplay"in e&&n(26,C=e.autoplay),"autoplayDuration"in e&&n(27,I=e.autoplayDuration),"autoplayDirection"in e&&n(28,T=e.autoplayDirection),"pauseOnFocus"in e&&n(29,k=e.pauseOnFocus),"autoplayProgressVisible"in e&&n(3,E=e.autoplayProgressVisible),"dots"in e&&n(4,S=e.dots),"swiping"in e&&n(30,P=e.swiping),"particlesToShow"in e&&n(31,N=e.particlesToShow),"particlesToScroll"in e&&n(32,R=e.particlesToScroll),"$$scope"in e&&n(36,o=e.$$scope)},e.$$.update=()=>{4&e.$$.dirty[0]&&(h.infinite=y),33554432&e.$$.dirty[0]&&(h.durationMsInit=b),67108864&e.$$.dirty[0]&&(h.autoplay=C),134217728&e.$$.dirty[0]&&(h.autoplayDuration=I),268435456&e.$$.dirty[0]&&(h.autoplayDirection=T),536870912&e.$$.dirty[0]&&(h.pauseOnFocus=k),1&e.$$.dirty[1]&&(h.particlesToShowInit=N),2&e.$$.dirty[1]&&(h.particlesToScrollInit=R)},[m,v,y,E,S,a,i,r,c,l,u,x,_,g,p,M,function(){P&&(h.durationMs=0)},async function(e){P&&await mu({[Jl]:p.showNextPage,[Yl]:p.showPrevPage})(e.detail.direction)},function(e){P&&(h.offset+=e.detail.dx)},function(){P&&p.showParticle(h.currentParticleIndex)},async function(){P&&await p.offsetPage({animated:!0})},function(e){h.focused=e.detail.value},function(){p.toggleFocused()},function(){p.showPrevPage()},w,b,C,I,T,k,P,N,R,async function(e,t){const n=gu(t,"animated",!0);if("number"!=typeof e)throw new Error("pageIndex should be a number");await p.showPage(e,{animated:n})},async function(e){const t=gu(e,"animated",!0);await p.showPrevPage({animated:t})},async function(e){const t=gu(e,"animated",!0);await p.showNextPage({animated:t})},o,s,()=>x/3,function(e){J[e?"unshift":"push"]((()=>{g=e,n(13,g)}))},function(e){J[e?"unshift":"push"]((()=>{_=e,n(12,_)}))},e=>M(e.detail)]}const qu=class extends Te{constructor(e){super(),Ie(this,e,Uu,ju,a,{timingFunction:0,arrows:1,infinite:2,initialPageIndex:24,duration:25,autoplay:26,autoplayDuration:27,autoplayDirection:28,pauseOnFocus:29,autoplayProgressVisible:3,dots:4,swiping:30,particlesToShow:31,particlesToScroll:32,goTo:33,goToPrev:34,goToNext:35},null,[-1,-1])}get goTo(){return this.$$.ctx[33]}get goToPrev(){return this.$$.ctx[34]}get goToNext(){return this.$$.ctx[35]}};function Wu(e){let t,n,i,r,s,o,a,c;return{c(){t=N("div"),n=N("img"),l(n.src,i=e[0].photoUrl)||M(n,"src",i),M(n,"alt",r=e[0].name),M(n,"class","svelte-1qbn4l6"),M(t,"class","card svelte-1qbn4l6")},m(i,r){E(i,t,r),T(t,n),o=!0,a||(c=D(n,"click",e[2]),a=!0)},p(e,t){(!o||1&t&&!l(n.src,i=e[0].photoUrl))&&M(n,"src",i),(!o||1&t&&r!==(r=e[0].name))&&M(n,"alt",r)},i(e){o||(ie((()=>{s||(s=me(n,Vu,{},!0)),s.run(1)})),o=!0)},o(e){s||(s=me(n,Vu,{},!1)),s.run(0),o=!1},d(e){e&&S(t),e&&s&&s.end(),a=!1,c()}}}function zu(e){let t,n,i,r,s,o,a,c=e[0].description+"";return{c(){t=N("div"),n=N("p"),i=x(c),M(n,"class","svelte-1qbn4l6"),M(t,"class","card svelte-1qbn4l6")},m(r,c){E(r,t,c),T(t,n),T(n,i),s=!0,o||(a=D(n,"click",e[2]),o=!0)},p(e,t){(!s||1&t)&&c!==(c=e[0].description+"")&&L(i,c)},i(e){s||(ie((()=>{r||(r=me(n,Vu,{},!0)),r.run(1)})),s=!0)},o(e){r||(r=me(n,Vu,{},!1)),r.run(0),s=!1},d(e){e&&S(t),e&&r&&r.end(),o=!1,a()}}}function Hu(e){let t,n,i,r,s,o,a,c,l,u=e[0].name+"";const h=[zu,Wu],d=[];function p(e,t){return e[1]?0:1}return i=p(e),r=d[i]=h[i](e),{c(){t=N("section"),n=N("div"),r.c(),s=O(),o=N("a"),a=x(u),M(n,"class","card-container svelte-1qbn4l6"),M(o,"href",c=e[0].url),M(o,"class","svelte-1qbn4l6"),M(t,"class","svelte-1qbn4l6")},m(e,r){E(e,t,r),T(t,n),d[i].m(n,null),T(t,s),T(t,o),T(o,a),l=!0},p(e,[t]){let s=i;i=p(e),i===s?d[i].p(e,t):(de(),_e(d[s],1,1,(()=>{d[s]=null})),pe(),r=d[i],r?r.p(e,t):(r=d[i]=h[i](e),r.c()),fe(r,1),r.m(n,null)),(!l||1&t)&&u!==(u=e[0].name+"")&&L(a,u),(!l||1&t&&c!==(c=e[0].url))&&M(o,"href",c)},i(e){l||(fe(r),l=!0)},o(e){_e(r),l=!1},d(e){e&&S(t),d[i].d()}}}function Vu(e,{delay:t=0,duration:n=1500}){return{delay:t,duration:n,css:(e,t)=>`\n\t\t\t\ttransform: rotateY(${1-180*t}deg);\n\t\t\t\topacity: ${1-t};\n\t\t\t`}}function Bu(e,t,n){let{project:i}=t,r=!1;return e.$$set=e=>{"project"in e&&n(0,i=e.project)},[i,r,function(){n(1,r=!r)}]}const Gu=class extends Te{constructor(e){super(),Ie(this,e,Bu,Hu,a,{project:0})}};function Ku(e){let t,n,i,r;return{c(){t=N("div"),n=N("button"),n.textContent="Add Project",M(t,"class","form-item svelte-7dr2dy")},m(s,a){E(s,t,a),T(t,n),i||(r=D(n,"click",(function(){o(e[3]())&&e[3]().apply(this,arguments)})),i=!0)},p(t,n){e=t},d(e){e&&S(t),i=!1,r()}}}function Yu(t){let n,i,r,s,o,a,c,l,u,h,d,p,f,_,g,m,v,y,w,b,C,I,k,P,R,x=t[2]&&Ku(t);return{c(){n=N("form"),i=N("div"),r=N("label"),r.textContent="Project Title:",s=N("input"),a=O(),c=N("div"),l=N("label"),l.textContent="Description:",u=N("textarea"),d=O(),p=N("div"),f=N("label"),f.textContent="Photo URL:",_=N("input"),m=O(),v=N("div"),y=N("label"),y.textContent="Project URL:",w=N("input"),C=O(),I=N("div"),I.innerHTML='<input type="submit" value="Update Project"/>',k=O(),x&&x.c(),M(r,"for","name"),M(s,"type","text"),M(s,"name","name"),s.value=o=t[0].name,M(i,"class","form-item svelte-7dr2dy"),M(l,"for","description"),M(u,"name","description"),M(u,"rows","10"),u.value=h=t[0].description,M(u,"class","svelte-7dr2dy"),M(c,"class","form-item svelte-7dr2dy"),M(f,"for","photo"),M(_,"type","text"),M(_,"name","photo"),_.value=g=t[0].photoUrl,M(p,"class","form-item svelte-7dr2dy"),M(y,"for","link"),M(w,"type","text"),M(w,"name","link"),w.value=b=t[0].url,M(v,"class","form-item svelte-7dr2dy"),M(I,"class","form-item svelte-7dr2dy"),M(n,"id",t[1]),M(n,"class","svelte-7dr2dy")},m(e,o){E(e,n,o),T(n,i),T(i,r),T(i,s),T(n,a),T(n,c),T(c,l),T(c,u),T(n,d),T(n,p),T(p,f),T(p,_),T(n,m),T(n,v),T(v,y),T(v,w),T(n,C),T(n,I),T(n,k),x&&x.m(n,null),P||(R=D(n,"submit",t[4]),P=!0)},p(e,[t]){1&t&&o!==(o=e[0].name)&&s.value!==o&&(s.value=o),1&t&&h!==(h=e[0].description)&&(u.value=h),1&t&&g!==(g=e[0].photoUrl)&&_.value!==g&&(_.value=g),1&t&&b!==(b=e[0].url)&&w.value!==b&&(w.value=b),e[2]?x?x.p(e,t):(x=Ku(e),x.c(),x.m(n,null)):x&&(x.d(1),x=null),2&t&&M(n,"id",e[1])},i:e,o:e,d(e){e&&S(n),x&&x.d(),P=!1,R()}}}function Ju(e,t,n){let{project:i}=t,{index:r}=t,{last:s=!1}=t,{addProject:o}=t;return e.$$set=e=>{"project"in e&&n(0,i=e.project),"index"in e&&n(1,r=e.index),"last"in e&&n(2,s=e.last),"addProject"in e&&n(3,o=e.addProject)},[i,r,s,o,function(e){e.preventDefault();const t={description:e.target.description.value,name:e.target.name.value,photoUrl:e.target.photo.value,url:e.target.link.value};!async function(e,t){const n=No(cl,"projects/"+e);await Oo(n,t)}(r,t)}]}const Qu=class extends Te{constructor(e){super(),Ie(this,e,Ju,Yu,a,{project:0,index:1,last:2,addProject:3})}};function Xu(e,t,n){const i=e.slice();return i[7]=t[n],i[9]=n,i}function Zu(e){let t,n;return t=new qu({props:{swiping:!1,$$slots:{default:[th]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},p(e,n){const i={};1027&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function eh(e){let t,n;return t=new Qu({props:{project:e[7],index:e[9],addProject:e[3],last:e[9]===e[1].length-1}}),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},p(e,n){const i={};1&n&&(i.project=e[7]),2&n&&(i.last=e[9]===e[1].length-1),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function th(e){let t,n,i=e[0],r=[];for(let t=0;t<i.length;t+=1)r[t]=eh(Xu(e,i,t));const s=e=>_e(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=A()},m(e,i){for(let t=0;t<r.length;t+=1)r[t].m(e,i);E(e,t,i),n=!0},p(e,n){if(11&n){let o;for(i=e[0],o=0;o<i.length;o+=1){const s=Xu(e,i,o);r[o]?(r[o].p(s,n),fe(r[o],1)):(r[o]=eh(s),r[o].c(),fe(r[o],1),r[o].m(t.parentNode,t))}for(de(),o=i.length;o<r.length;o+=1)s(o);pe()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)fe(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)_e(r[e]);n=!1},d(e){P(r,e),e&&S(t)}}}function nh(e){let t,n,i,r,s,o,a=null!==e[0]&&Zu(e);return{c(){t=N("div"),n=N("div"),a&&a.c(),M(n,"id","carousel"),M(t,"class","modal svelte-12vkflx")},m(i,c){E(i,t,c),T(t,n),a&&a.m(n,null),r=!0,s||(o=D(t,"click",e[2]),s=!0)},p(e,[t]){null!==e[0]?a?(a.p(e,t),1&t&&fe(a,1)):(a=Zu(e),a.c(),fe(a,1),a.m(n,null)):a&&(de(),_e(a,1,1,(()=>{a=null})),pe())},i(e){r||(fe(a),ie((()=>{i||(i=me(t,ke,{},!0)),i.run(1)})),r=!0)},o(e){_e(a),i||(i=me(t,ke,{},!1)),i.run(0),r=!1},d(e){e&&S(t),a&&a.d(),e&&i&&i.end(),s=!1,o()}}}function ih(e,t,n){let i,r;h(e,Cl,(e=>n(1,r=e)));let{toggleFn:s}=t;const o=r,a={name:"",description:"",photoUrl:"",url:""};return e.$$set=e=>{"toggleFn"in e&&n(4,s=e.toggleFn)},n(0,i=o),[i,r,function(e){e.target.classList.contains("modal")&&s()},function(){i.push(a),n(0,i),console.log(i,r)},s]}const rh=class extends Te{constructor(e){super(),Ie(this,e,ih,nh,a,{toggleFn:4})}};function sh(t){let n;return{c(){n=N("div"),n.innerHTML='<div class="load-icon svelte-3ioyru"></div> \n  <p class="svelte-3ioyru">Loading</p>',M(n,"class","loading-container svelte-3ioyru")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}const oh=class extends Te{constructor(e){super(),Ie(this,e,null,sh,a,{})}};function ah(e){let t,n,i,r,s,a;return{c(){t=R("svg"),n=R("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),M(t,"xmlns","http://www.w3.org/2000/svg"),M(t,"fill","none"),M(t,"viewBox","0 0 24 24"),M(t,"stroke","currentColor"),M(t,"class","svelte-1htwly9")},m(i,c){E(i,t,c),T(t,n),r=!0,s||(a=D(t,"click",(function(){o(e[0])&&e[0].apply(this,arguments)})),s=!0)},p(t,[n]){e=t},i(e){r||(ie((()=>{i||(i=me(t,ke,{},!0)),i.run(1)})),r=!0)},o(e){i||(i=me(t,ke,{},!1)),i.run(0),r=!1},d(e){e&&S(t),e&&i&&i.end(),s=!1,a()}}}function ch(e,t,n){let{toggleFn:i}=t;return e.$$set=e=>{"toggleFn"in e&&n(0,i=e.toggleFn)},[i]}const lh=class extends Te{constructor(e){super(),Ie(this,e,ch,ah,a,{toggleFn:0})}};function uh(e,t,n){const i=e.slice();return i[5]=t[n],i}function hh(e){let t,n;return t=new rh({props:{toggleFn:e[3]}}),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},p(e,n){const i={};1&n&&(i.toggleFn=e[3]),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function dh(e){let t,n;return t=new lh({props:{toggleFn:e[4]}}),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},p(e,n){const i={};1&n&&(i.toggleFn=e[4]),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function ph(e){let t,n,i;return n=new qu({props:{$$slots:{default:[gh]},$$scope:{ctx:e}}}),{c(){t=N("div"),we(n.$$.fragment),M(t,"id","carousel")},m(e,r){E(e,t,r),be(n,t,null),i=!0},p(e,t){const i={};260&t&&(i.$$scope={dirty:t,ctx:e}),n.$set(i)},i(e){i||(fe(n.$$.fragment,e),i=!0)},o(e){_e(n.$$.fragment,e),i=!1},d(e){e&&S(t),Ce(n)}}}function fh(t){let n,i;return n=new oh({}),{c(){we(n.$$.fragment)},m(e,t){be(n,e,t),i=!0},p:e,i(e){i||(fe(n.$$.fragment,e),i=!0)},o(e){_e(n.$$.fragment,e),i=!1},d(e){Ce(n,e)}}}function _h(e){let t,n;return t=new Gu({props:{project:e[5]}}),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},p(e,n){const i={};4&n&&(i.project=e[5]),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function gh(e){let t,n,i=e[2],r=[];for(let t=0;t<i.length;t+=1)r[t]=_h(uh(e,i,t));const s=e=>_e(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=A()},m(e,i){for(let t=0;t<r.length;t+=1)r[t].m(e,i);E(e,t,i),n=!0},p(e,n){if(4&n){let o;for(i=e[2],o=0;o<i.length;o+=1){const s=uh(e,i,o);r[o]?(r[o].p(s,n),fe(r[o],1)):(r[o]=_h(s),r[o].c(),fe(r[o],1),r[o].m(t.parentNode,t))}for(de(),o=i.length;o<r.length;o+=1)s(o);pe()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)fe(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)_e(r[e]);n=!1},d(e){P(r,e),e&&S(t)}}}function mh(e){let t,n,i,r,s,o,a,c,l=e[0]&&hh(e),u=e[1]&&dh(e);const h=[fh,ph],d=[];function p(e,t){return null===e[2]?0:1}return o=p(e),a=d[o]=h[o](e),{c(){t=N("section"),l&&l.c(),n=O(),i=N("h2"),r=x("My Projects\n    "),u&&u.c(),s=O(),a.c()},m(e,a){E(e,t,a),l&&l.m(t,null),T(t,n),T(t,i),T(i,r),u&&u.m(i,null),T(t,s),d[o].m(t,null),c=!0},p(e,[r]){e[0]?l?(l.p(e,r),1&r&&fe(l,1)):(l=hh(e),l.c(),fe(l,1),l.m(t,n)):l&&(de(),_e(l,1,1,(()=>{l=null})),pe()),e[1]?u?(u.p(e,r),2&r&&fe(u,1)):(u=dh(e),u.c(),fe(u,1),u.m(i,null)):u&&(de(),_e(u,1,1,(()=>{u=null})),pe());let s=o;o=p(e),o===s?d[o].p(e,r):(de(),_e(d[s],1,1,(()=>{d[s]=null})),pe(),a=d[o],a?a.p(e,r):(a=d[o]=h[o](e),a.c()),fe(a,1),a.m(t,null))},i(e){c||(fe(l),fe(u),fe(a),c=!0)},o(e){_e(l),_e(u),_e(a),c=!1},d(e){e&&S(t),l&&l.d(),u&&u.d(),d[o].d()}}}function vh(e,t,n){let i,r;h(e,pl,(e=>n(1,i=e))),h(e,Cl,(e=>n(2,r=e)));let s=!1;return[s,i,r,()=>n(0,s=!s),()=>n(0,s=!s)]}const yh=class extends Te{constructor(e){super(),Ie(this,e,vh,mh,a,{})}};function wh(e){let t,n,i,r,o,a,c,l,u,h;return{c(){t=N("div"),n=N("form"),i=N("div"),r=N("textarea"),o=O(),a=N("input"),M(r,"name","bio"),M(r,"id","bio"),M(r,"cols","30"),M(r,"rows","10"),r.value=e[0],M(r,"class","svelte-1rndsiw"),M(a,"type","submit"),a.value="Update Biography",M(a,"class","svelte-1rndsiw"),M(n,"class","svelte-1rndsiw"),M(t,"class","modal")},m(s,c){E(s,t,c),T(t,n),T(n,i),T(i,r),T(n,o),T(n,a),l=!0,u||(h=[D(n,"submit",e[2]),D(t,"click",e[1])],u=!0)},p(e,[t]){(!l||1&t)&&(r.value=e[0])},i(e){l||(ie((()=>{c||(c=me(t,ke,{},!0)),c.run(1)})),l=!0)},o(e){c||(c=me(t,ke,{},!1)),c.run(0),l=!1},d(e){e&&S(t),e&&c&&c.end(),u=!1,s(h)}}}function bh(e,t,n){let i;h(e,bl,(e=>n(0,i=e)));let{toggleFn:r}=t;return e.$$set=e=>{"toggleFn"in e&&n(3,r=e.toggleFn)},[i,function(e){e.target.classList.contains("modal")&&r()},function(e){var t;e.preventDefault(),t=e.target.bio.value,xo(No(cl,"bio"),t),r()},r]}const Ch=class extends Te{constructor(e){super(),Ie(this,e,bh,wh,a,{toggleFn:3})}};function Ih(e){let t,n;return t=new lh({props:{toggleFn:e[3]}}),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},p(e,n){const i={};1&n&&(i.toggleFn=e[3]),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Th(e){let t,n;return t=new Ch({props:{toggleFn:e[4]}}),{c(){we(t.$$.fragment)},m(e,i){be(t,e,i),n=!0},p(e,n){const i={};1&n&&(i.toggleFn=e[4]),t.$set(i)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){_e(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function kh(t){let n,i;return{c(){n=N("p"),i=x(t[2]),M(n,"class","svelte-1ohy4ha")},m(e,t){E(e,n,t),T(n,i)},p(e,t){4&t&&L(i,e[2])},i:e,o:e,d(e){e&&S(n)}}}function Eh(t){let n,i;return n=new oh({}),{c(){we(n.$$.fragment)},m(e,t){be(n,e,t),i=!0},p:e,i(e){i||(fe(n.$$.fragment,e),i=!0)},o(e){_e(n.$$.fragment,e),i=!1},d(e){Ce(n,e)}}}function Sh(e){let t,n,i,r,s,o,a,c,l=e[1]&&Ih(e),u=e[0]&&Th(e);const h=[Eh,kh],d=[];function p(e,t){return null===e[2]?0:1}return o=p(e),a=d[o]=h[o](e),{c(){t=N("section"),n=N("h2"),i=x("About Me\n    "),l&&l.c(),r=O(),u&&u.c(),s=O(),a.c()},m(e,a){E(e,t,a),T(t,n),T(n,i),l&&l.m(n,null),T(t,r),u&&u.m(t,null),T(t,s),d[o].m(t,null),c=!0},p(e,[i]){e[1]?l?(l.p(e,i),2&i&&fe(l,1)):(l=Ih(e),l.c(),fe(l,1),l.m(n,null)):l&&(de(),_e(l,1,1,(()=>{l=null})),pe()),e[0]?u?(u.p(e,i),1&i&&fe(u,1)):(u=Th(e),u.c(),fe(u,1),u.m(t,s)):u&&(de(),_e(u,1,1,(()=>{u=null})),pe());let r=o;o=p(e),o===r?d[o].p(e,i):(de(),_e(d[r],1,1,(()=>{d[r]=null})),pe(),a=d[o],a?a.p(e,i):(a=d[o]=h[o](e),a.c()),fe(a,1),a.m(t,null))},i(e){c||(fe(l),fe(u),fe(a),c=!0)},o(e){_e(l),_e(u),_e(a),c=!1},d(e){e&&S(t),l&&l.d(),u&&u.d(),d[o].d()}}}function Ph(e,t,n){let i,r;h(e,pl,(e=>n(1,i=e))),h(e,bl,(e=>n(2,r=e)));let s=!1;return B((()=>{!async function(){const e=await(async()=>await ul)();bl.set(e)}()})),[s,i,r,()=>n(0,s=!s),()=>n(0,s=!s)]}const Nh=class extends Te{constructor(e){super(),Ie(this,e,Ph,Sh,a,{})}};function Rh(e,t,n){const i=e.slice();return i[1]=t[n],i}function xh(t){let n,i=t[0],r=[];for(let e=0;e<i.length;e+=1)r[e]=Ah(Rh(t,i,e));return{c(){n=N("div");for(let e=0;e<r.length;e+=1)r[e].c();M(n,"class","skill-grid svelte-sijszw")},m(e,t){E(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,t){if(1&t){let s;for(i=e[0],s=0;s<i.length;s+=1){const o=Rh(e,i,s);r[s]?r[s].p(o,t):(r[s]=Ah(o),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=i.length}},i:e,o:e,d(e){e&&S(n),P(r,e)}}}function Oh(t){let n,i;return n=new oh({}),{c(){we(n.$$.fragment)},m(e,t){be(n,e,t),i=!0},p:e,i(e){i||(fe(n.$$.fragment,e),i=!0)},o(e){_e(n.$$.fragment,e),i=!1},d(e){Ce(n,e)}}}function Ah(e){let t,n,i,r,s,o;return{c(){t=N("div"),n=N("img"),s=O(),o=N("div"),l(n.src,i=`https://cdn.jsdelivr.net/gh/devicons/devicon/icons/${e[1].skillName}/${e[1].imgSrc}`)||M(n,"src",i),M(n,"alt",r=e[1].skillName),M(n,"class","svelte-sijszw"),M(t,"class","image svelte-sijszw"),M(o,"class","filler svelte-sijszw")},m(e,i){E(e,t,i),T(t,n),E(e,s,i),E(e,o,i)},p(e,t){1&t&&!l(n.src,i=`https://cdn.jsdelivr.net/gh/devicons/devicon/icons/${e[1].skillName}/${e[1].imgSrc}`)&&M(n,"src",i),1&t&&r!==(r=e[1].skillName)&&M(n,"alt",r)},d(e){e&&S(t),e&&S(s),e&&S(o)}}}function Dh(e){let t,n,i,r,s,o;const a=[Oh,xh],c=[];function l(e,t){return null===e[0]?0:1}return r=l(e),s=c[r]=a[r](e),{c(){t=N("section"),n=N("h2"),n.textContent="My Skills",i=O(),s.c()},m(e,s){E(e,t,s),T(t,n),T(t,i),c[r].m(t,null),o=!0},p(e,[n]){let i=r;r=l(e),r===i?c[r].p(e,n):(de(),_e(c[i],1,1,(()=>{c[i]=null})),pe(),s=c[r],s?s.p(e,n):(s=c[r]=a[r](e),s.c()),fe(s,1),s.m(t,null))},i(e){o||(fe(s),o=!0)},o(e){_e(s),o=!1},d(e){e&&S(t),c[r].d()}}}function Mh(e,t,n){let i;return h(e,Il,(e=>n(0,i=e))),[i]}const Lh=class extends Te{constructor(e){super(),Ie(this,e,Mh,Dh,a,{})}};function $h(t){let n,i,r,s,o,a,c,l,u,h,d,p,f,_;return i=new Fl({}),o=new Nh({}),c=new Lh({}),u=new yh({}),d=new Ul({}),{c(){n=N("main"),we(i.$$.fragment),r=O(),s=N("div"),we(o.$$.fragment),a=O(),we(c.$$.fragment),l=O(),we(u.$$.fragment),h=O(),we(d.$$.fragment),p=O(),f=N("footer"),f.innerHTML='<span class="svelte-19sls72">Built and designed by: Alex Wiegand</span> \n    <span class="svelte-19sls72">Photos hosted at <a href="https://flickr.com">Flickr</a></span>',M(s,"id","body"),M(s,"class","svelte-19sls72"),M(f,"class","svelte-19sls72"),M(n,"class","svelte-19sls72")},m(e,t){E(e,n,t),be(i,n,null),T(n,r),T(n,s),be(o,s,null),T(s,a),be(c,s,null),T(s,l),be(u,s,null),T(s,h),be(d,s,null),T(n,p),T(n,f),_=!0},p:e,i(e){_||(fe(i.$$.fragment,e),fe(o.$$.fragment,e),fe(c.$$.fragment,e),fe(u.$$.fragment,e),fe(d.$$.fragment,e),_=!0)},o(e){_e(i.$$.fragment,e),_e(o.$$.fragment,e),_e(c.$$.fragment,e),_e(u.$$.fragment,e),_e(d.$$.fragment,e),_=!1},d(e){e&&S(n),Ce(i),Ce(o),Ce(c),Ce(u),Ce(d)}}}new class extends Te{constructor(e){super(),Ie(this,e,null,$h,a,{})}}({target:document.body})})()})();